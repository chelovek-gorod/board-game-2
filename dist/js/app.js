/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./dev_js/assets.js":
/*!**************************!*\
  !*** ./dev_js/assets.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MUSIC_PATH: () => (/* binding */ MUSIC_PATH),\n/* harmony export */   SOUNDS: () => (/* binding */ SOUNDS),\n/* harmony export */   SOUNDS_PATH: () => (/* binding */ SOUNDS_PATH),\n/* harmony export */   SPRITES: () => (/* binding */ SPRITES),\n/* harmony export */   SPRITES_PATH: () => (/* binding */ SPRITES_PATH)\n/* harmony export */ });\nconst SPRITES_PATH = './src/images/';\r\nconst SOUNDS_PATH = './src/sounds/';\r\nconst MUSIC_PATH = './src/music/';\r\n\r\nconst SPRITES = {\r\n    halp1: 'help_01_920x920px.png',\r\n    halp2: 'help_02_920x920px.png',\r\n    halp3: 'help_03_920x920px.png',\r\n    halp4: 'help_04_920x920px.png',\r\n    halp5: 'help_05_920x920px.png',\r\n    halp6: 'help_06_920x920px.png',\r\n    halp7: 'help_07_920x920px.png',\r\n    halp8: 'help_08_920x920px.png',\r\n    halp9: 'help_09_920x920px.png',\r\n    halp10: 'help_10_920x920px.png',\r\n\r\n    menuLogo: 'MarsGameLogoDarkBg.png',\r\n    menuButton: 'options_button_128x128px.png',\r\n    menuButtonLock: 'options_button_lock_128x128px.png',\r\n    menuPlayer: 'use_player_128x128px.png',\r\n    menuComputer: 'use_computer_128x128px.png',\r\n    menuNoUser: 'use_no_128x128px.png',\r\n    menuRandom: 'use_random_128x128px.png',\r\n    menuMusicOn: 'options_music_on_128x128px.png',\r\n    menuMusicOff: 'options_music_off_128x128px.png',\r\n    menuEffectsOn: 'options_effects_on_128x128px.png',\r\n    menuEffectsOff: 'options_effects_off_128x128px.png',\r\n\r\n    board: 'board.svg',\r\n    dice: 'dices_84x84px_mixed_frames.png',\r\n    dicePointer: 'pointer_dice_160x160px.png',\r\n    pointerPlayerH: 'turn_bw_480x120px_32frames.png',\r\n    pointerPlayerV: 'turn_bw_120x480px_32frames.png',\r\n    tokenPointerHuman: 'pointer_token_human_160x160px.png',\r\n    tokenPointerBot: 'pointer_token_bot_160x160px.png',\r\n\r\n    tokenBomb: 'token_bomb_128x128px.png',\r\n    tokenButton: 'token_button_128x128px.png',\r\n    tokenCap: 'token_cap_128x128px.png',\r\n    tokenCoin: 'token_coin_128x128px.png',\r\n    tokenCrystal: 'token_crystal_128x128px.png',\r\n    tokenDragon:'token_dragon_128x128px.png',\r\n    tokenEye: 'token_eye_128x128px.png',\r\n    tokenHelmet:'token_helmet_128x128px.png',\r\n    tokenMask:'token_mask_128x128px.png',\r\n    tokenMolecule:'token_molecule_128x128px.png',\r\n    tokenMoon:'token_moon_128x128px.png',\r\n    tokenNut:'token_nut_128x128px.png',\r\n    tokenPlane: 'token_plane_128x128px.png',\r\n    tokenShark: 'token_shark_128x128px.png',\r\n    tokenShield:'token_shield_128x128px.png',\r\n    tokenSkull: 'token_skull_128x128px.png',\r\n    tokenStone: 'token_stone_128x128px.png',\r\n    tokenToy: 'token_toy_128x128px.png',\r\n    tokenUfo: 'token_ufo_128x128px.png',\r\n    tokenWheel: 'token_wheel_128x128px.png',\r\n};\r\n\r\nconst SOUNDS = {\r\n    menuToken: 'se_menu_click.mp3',\r\n    menuClick: 'se_menu_token.mp3',\r\n    menuEffects: 'se_menu_effects.mp3',\r\n    menuMusic: 'se_menu_music.mp3',\r\n    menuStart: 'se_menu_start.mp3',\r\n    dice: 'se_dices.mp3',\r\n    dice2: 'se_dices2.mp3',\r\n    startToken: 'se_start_token.mp3',\r\n    step0: 'se_step_0.mp3',\r\n    step1: 'se_step_1.mp3',\r\n    step2: 'se_step_2.mp3',\r\n    step3: 'se_step_3.mp3',\r\n    toiletStart: 'se_toilet_start.mp3',\r\n    toilet0: 'se_toilet_0.mp3',\r\n    toilet1: 'se_toilet_1.mp3',\r\n    toilet2: 'se_toilet_2.mp3',\r\n    toilet3: 'se_toilet_3.mp3',\r\n    toiletExit: 'se_toilet_exit.mp3',\r\n    home: 'se_home.mp3',\r\n    corner: 'se_corner.mp3',\r\n    port: 'se_port.mp3',\r\n    destroy: 'se_destroy.mp3',\r\n    win: 'se_final_win.mp3',\r\n    lose: 'se_final_lose.mp3',\r\n};\n\n//# sourceURL=webpack://webpack-template/./dev_js/assets.js?");

/***/ }),

/***/ "./dev_js/classes/Board.js":
/*!*********************************!*\
  !*** ./dev_js/classes/Board.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _render__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../render */ \"./dev_js/render.js\");\n/* harmony import */ var _assets__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../assets */ \"./dev_js/assets.js\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../constants */ \"./dev_js/constants.js\");\n\r\n\r\n\r\n\r\nclass Board {\r\n    constructor() {\r\n        this.image = _assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.board;\r\n        this.ceilSize = _constants__WEBPACK_IMPORTED_MODULE_2__[\"default\"].ceilSize;\r\n        this.imageSize = 13 * this.ceilSize;\r\n        this.imageOffset = _constants__WEBPACK_IMPORTED_MODULE_2__[\"default\"].boardOffset + _constants__WEBPACK_IMPORTED_MODULE_2__[\"default\"].ceilSize;\r\n\r\n        this.reserveTop = [\r\n            // isEmpty: true - так как в начале нет фишек, они появятся при старте\r\n            {isEmpty: true, targetIndex: 6, x: 0, y: 0, rateX: 5.5, rateY: 0},\r\n            {isEmpty: true, targetIndex: 6, x: 0, y: 0, rateX: 6.5, rateY: 0},\r\n            {isEmpty: true, targetIndex: 6, x: 0, y: 0, rateX: 7.5, rateY: 0},\r\n            {isEmpty: true, targetIndex: 6, x: 0, y: 0, rateX: 8.5, rateY: 0},\r\n        ];\r\n        this.reserveRight = [\r\n            // isEmpty: true - так как в начале нет фишек, они появятся при старте\r\n            {isEmpty: true, targetIndex: 18, x: 0, y: 0, rateX: 14, rateY: 5.5},\r\n            {isEmpty: true, targetIndex: 18, x: 0, y: 0, rateX: 14, rateY: 6.5},\r\n            {isEmpty: true, targetIndex: 18, x: 0, y: 0, rateX: 14, rateY: 7.5},\r\n            {isEmpty: true, targetIndex: 18, x: 0, y: 0, rateX: 14, rateY: 8.5},\r\n        ];\r\n        this.reserveBottom = [\r\n            // isEmpty: true - так как в начале нет фишек, они появятся при старте\r\n            {isEmpty: true, targetIndex: 30, x: 0, y: 0, rateX: 5.5, rateY: 14},\r\n            {isEmpty: true, targetIndex: 30, x: 0, y: 0, rateX: 6.5, rateY: 14},\r\n            {isEmpty: true, targetIndex: 30, x: 0, y: 0, rateX: 7.5, rateY: 14},\r\n            {isEmpty: true, targetIndex: 30, x: 0, y: 0, rateX: 8.5, rateY: 14},\r\n        ];\r\n        this.reserveLeft = [\r\n            // isEmpty: true - так как в начале нет фишек, они появятся при старте\r\n            {isEmpty: true, targetIndex: 42, x: 0, y: 0, rateX: 0, rateY: 5.5},\r\n            {isEmpty: true, targetIndex: 42, x: 0, y: 0, rateX: 0, rateY: 6.5},\r\n            {isEmpty: true, targetIndex: 42, x: 0, y: 0, rateX: 0, rateY: 7.5},\r\n            {isEmpty: true, targetIndex: 42, x: 0, y: 0, rateX: 0, rateY: 8.5},\r\n        ];\r\n        this.reserves = [this.reserveTop, this.reserveRight, this.reserveBottom, this.reserveLeft];\r\n\r\n        this.toiletTop = [\r\n            {token: null, move: 1, x: 0, y: 0, rateX: 10, rateY: 2},\r\n            {token: null, move: 3, x: 0, y: 0, rateX: 11, rateY: 2},\r\n            {token: null, move: 6, targetIndex: 11, x: 0, y: 0, rateX: 12, rateY: 2},\r\n        ];\r\n        this.toiletRight = [\r\n            {token: null, move: 1, x: 0, y: 0, rateX: 12, rateY: 10},\r\n            {token: null, move: 3, x: 0, y: 0, rateX: 12, rateY: 11},\r\n            {token: null, move: 6, targetIndex: 23, x: 0, y: 0, rateX: 12, rateY: 12},\r\n        ];\r\n        this.toiletBottom = [\r\n            {token: null, move: 1, x: 0, y: 0, rateX: 4, rateY: 12},\r\n            {token: null, move: 3, x: 0, y: 0, rateX: 3, rateY: 12},\r\n            {token: null, move: 6, targetIndex: 35, x: 0, y: 0, rateX: 2, rateY: 12},\r\n        ];\r\n        this.toiletLeft = [\r\n            {token: null, move: 1, x: 0, y: 0, rateX: 2, rateY: 4},\r\n            {token: null, move: 3, x: 0, y: 0, rateX: 2, rateY: 3},\r\n            {token: null, move: 6, targetIndex: 47, x: 0, y: 0, rateX: 2, rateY: 2},\r\n        ];\r\n        this.toilets = [this.toiletTop, this.toiletRight, this.toiletBottom, this.toiletLeft];\r\n\r\n        this.homeTop = [\r\n            {isEmpty: true, targetIndex: 6, x: 0, y: 0, rateX: 7, rateY: 2},\r\n            {isEmpty: true, targetIndex: 6, x: 0, y: 0, rateX: 7, rateY: 3},\r\n            {isEmpty: true, targetIndex: 6, x: 0, y: 0, rateX: 7, rateY: 4},\r\n            {isEmpty: true, targetIndex: 6, x: 0, y: 0, rateX: 7, rateY: 5},\r\n        ];\r\n        this.homeRight = [\r\n            {isEmpty: true, targetIndex: 18, x: 0, y: 0, rateX: 12, rateY: 7},\r\n            {isEmpty: true, targetIndex: 18, x: 0, y: 0, rateX: 11, rateY: 7},\r\n            {isEmpty: true, targetIndex: 18, x: 0, y: 0, rateX: 10, rateY: 7},\r\n            {isEmpty: true, targetIndex: 18, x: 0, y: 0, rateX: 9, rateY: 7},\r\n        ];\r\n        this.homeBottom = [\r\n            {isEmpty: true, targetIndex: 30, x: 0, y: 0, rateX: 7, rateY: 12},\r\n            {isEmpty: true, targetIndex: 30, x: 0, y: 0, rateX: 7, rateY: 11},\r\n            {isEmpty: true, targetIndex: 30, x: 0, y: 0, rateX: 7, rateY: 10},\r\n            {isEmpty: true, targetIndex: 30, x: 0, y: 0, rateX: 7, rateY: 9},\r\n        ];\r\n        this.homeLeft = [\r\n            {isEmpty: true, targetIndex: 42, x: 0, y: 0, rateX: 2, rateY: 7},\r\n            {isEmpty: true, targetIndex: 42, x: 0, y: 0, rateX: 3, rateY: 7},\r\n            {isEmpty: true, targetIndex: 42, x: 0, y: 0, rateX: 4, rateY: 7},\r\n            {isEmpty: true, targetIndex: 42, x: 0, y: 0, rateX: 5, rateY: 7},\r\n        ];\r\n        this.homes = [this.homeTop, this.homeRight, this.homeBottom, this.homeLeft];\r\n\r\n        this.ports = [\r\n            // граньСторона (topLeft - верхняя грань поля, слева)\r\n            {type: 'topLeft', targetIndex: 44, x: 0, y: 0, rateX: 5, rateY: 5},\r\n            {type: 'topRight', targetIndex: 16, x: 0, y: 0, rateX: 9, rateY: 5},\r\n            {type: 'rightTop', targetIndex: 8, x: 0, y: 0, rateX: 9, rateY: 5},\r\n            {type: 'rightBottom', targetIndex: 28, x: 0, y: 0, rateX: 9, rateY: 9},\r\n            {type: 'bottomRight', targetIndex: 20, x: 0, y: 0, rateX: 9, rateY: 9},\r\n            {type: 'bottomLeft', targetIndex: 40, x: 0, y: 0, rateX: 5, rateY: 9},\r\n            {type: 'leftBottom', targetIndex: 32, x: 0, y: 0, rateX: 5, rateY: 9},\r\n            {type: 'leftTop', targetIndex: 4, x: 0, y: 0, rateX: 5, rateY: 5},\r\n        ]\r\n\r\n        this.ceils = [\r\n            // top line\r\n            {type: 'corner', x: 0, y: 0, rateX: 1, rateY: 1},\r\n            {type: 'empty', x: 0, y: 0, rateX: 2, rateY: 1},\r\n            {type: 'empty', x: 0, y: 0, rateX: 3, rateY: 1},\r\n            {type: 'empty', x: 0, y: 0, rateX: 4, rateY: 1},\r\n            {type: 'port', targetIndex: 0, x: 0, y: 0, rateX: 5, rateY: 1},\r\n            {type: 'empty', x: 0, y: 0, rateX: 6, rateY: 1},\r\n            {type: 'home', targetIndex: 0, x: 0, y: 0, rateX: 7, rateY: 1},\r\n            {type: 'empty', x: 0, y: 0, rateX: 8, rateY: 1},\r\n            {type: 'port', targetIndex: 1, x: 0, y: 0, rateX: 9, rateY: 1},\r\n            {type: 'toilet', targetIndex: 0, x: 0, y: 0, rateX: 10, rateY: 1},\r\n            {type: 'empty', x: 0, y: 0, rateX: 11, rateY: 1},\r\n            {type: 'exit', x: 0, y: 0, rateX: 12, rateY: 1},\r\n            // right line\r\n            {type: 'corner', x: 0, y: 0, rateX: 13, rateY: 1},\r\n            {type: 'empty', x: 0, y: 0, rateX: 13, rateY: 2},\r\n            {type: 'empty', x: 0, y: 0, rateX: 13, rateY: 3},\r\n            {type: 'empty', x: 0, y: 0, rateX: 13, rateY: 4},\r\n            {type: 'port', targetIndex: 2, x: 0, y: 0, rateX: 13, rateY: 5},\r\n            {type: 'empty', x: 0, y: 0, rateX: 13, rateY: 6},\r\n            {type: 'home', targetIndex: 1, x: 0, y: 0, rateX: 13, rateY: 7},\r\n            {type: 'empty', x: 0, y: 0, rateX: 13, rateY: 8},\r\n            {type: 'port', targetIndex: 3, x: 0, y: 0, rateX: 13, rateY: 9},\r\n            {type: 'toilet', targetIndex: 1, x: 0, y: 0, rateX: 13, rateY: 10},\r\n            {type: 'empty', x: 0, y: 0, rateX: 13, rateY: 11},\r\n            {type: 'exit', x: 0, y: 0, rateX: 13, rateY: 12},\r\n            // bottom line\r\n            {type: 'corner', x: 0, y: 0, rateX: 13, rateY: 13},\r\n            {type: 'empty', x: 0, y: 0, rateX: 12, rateY: 13},\r\n            {type: 'empty', x: 0, y: 0, rateX: 11, rateY: 13},\r\n            {type: 'empty', x: 0, y: 0, rateX: 10, rateY: 13},\r\n            {type: 'port', targetIndex: 4, x: 0, y: 0, rateX: 9, rateY: 13},\r\n            {type: 'empty', x: 0, y: 0, rateX: 8, rateY: 13},\r\n            {type: 'home', targetIndex: 2, x: 0, y: 0, rateX: 7, rateY: 13},\r\n            {type: 'empty', x: 0, y: 0, rateX: 6, rateY: 13},\r\n            {type: 'port', targetIndex: 5, x: 0, y: 0, rateX: 5, rateY: 13},\r\n            {type: 'toilet', targetIndex: 2, x: 0, y: 0, rateX: 4, rateY: 13},\r\n            {type: 'empty', x: 0, y: 0, rateX: 3, rateY: 13},\r\n            {type: 'exit', x: 0, y: 0, rateX: 2, rateY: 13},\r\n            // left line\r\n            {type: 'corner', x: 0, y: 0, rateX: 1, rateY: 13},\r\n            {type: 'empty', x: 0, y: 0, rateX: 1, rateY: 12},\r\n            {type: 'empty', x: 0, y: 0, rateX: 1, rateY: 11},\r\n            {type: 'empty', x: 0, y: 0, rateX: 1, rateY: 10},\r\n            {type: 'port', targetIndex: 6, x: 0, y: 0, rateX: 1, rateY: 9},\r\n            {type: 'empty', x: 0, y: 0, rateX: 1, rateY: 8},\r\n            {type: 'home', targetIndex: 3, x: 0, y: 0, rateX: 1, rateY: 7},\r\n            {type: 'empty', x: 0, y: 0, rateX: 1, rateY: 6},\r\n            {type: 'port', targetIndex: 7, x: 0, y: 0, rateX: 1, rateY: 5},\r\n            {type: 'toilet', targetIndex: 3, x: 0, y: 0, rateX: 1, rateY: 4},\r\n            {type: 'empty', x: 0, y: 0, rateX: 1, rateY: 3},\r\n            {type: 'exit', x: 0, y: 0, rateX: 1, rateY: 2},\r\n        ];\r\n\r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        const offset = this.ceilSize * 0.5 + _constants__WEBPACK_IMPORTED_MODULE_2__[\"default\"].boardOffset;\r\n        [ ...this.reserves, ...this.toilets, ...this.homes, this.ports, this.ceils]\r\n        .forEach( container => {\r\n            container.forEach(ceil => {\r\n                ceil.x = offset + this.ceilSize * ceil.rateX;\r\n                ceil.y = offset + this.ceilSize * ceil.rateY;\r\n            });\r\n        });\r\n    }\r\n\r\n    update() {\r\n        _render__WEBPACK_IMPORTED_MODULE_0__[\"default\"].context.drawImage(this.image, this.imageOffset, this.imageOffset, this.imageSize, this.imageSize);\r\n    }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Board);\n\n//# sourceURL=webpack://webpack-template/./dev_js/classes/Board.js?");

/***/ }),

/***/ "./dev_js/classes/Dice.js":
/*!********************************!*\
  !*** ./dev_js/classes/Dice.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _assets__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../assets */ \"./dev_js/assets.js\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../constants */ \"./dev_js/constants.js\");\n/* harmony import */ var _main__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../main */ \"./dev_js/main.js\");\n/* harmony import */ var _render__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../render */ \"./dev_js/render.js\");\n/* harmony import */ var _DicePointer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./DicePointer */ \"./dev_js/classes/DicePointer.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nconst results = [\r\n    1, 1, /* <- not used in game START DICES VALUE */\r\n    /* START */\r\n]\r\n\r\nfunction checkChit() {\r\n    let tokensInReserve = 0;\r\n    let tokensOnMain = 0;\r\n    const player = _main__WEBPACK_IMPORTED_MODULE_2__.game.players[_main__WEBPACK_IMPORTED_MODULE_2__.game.currentTurn];\r\n    if (!player) return false; /* at set start value before players init */\r\n\r\n    player.tokens.forEach(token => {\r\n        if (token.container === token.reserve) tokensInReserve++;\r\n        if (token.container === _main__WEBPACK_IMPORTED_MODULE_2__.game.board.ceils) tokensOnMain++;\r\n    });\r\n\r\n    return tokensInReserve > tokensOnMain;\r\n}\r\n\r\nclass Dice {\r\n    constructor(x, y) {\r\n        this.img = _assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES.dice;\r\n        this.x = x - 42;\r\n        this.y = y - 42;\r\n        this.frameSize = 84;\r\n\r\n        this.throwDuration = _constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].diceThrowDuration;\r\n        this.fps = 30;\r\n        this.frameDuration = Math.floor(1000 / this.fps);\r\n        this.frameTimeout = this.frameDuration;\r\n        this.framePathSize = Math.floor(this.throwDuration / this.frameDuration);\r\n        this.framePath = [];\r\n        this.framePoint = {x: 0, y: 0};\r\n        this.value = this.getNewValue();\r\n\r\n        this.pointer = new _DicePointer__WEBPACK_IMPORTED_MODULE_4__[\"default\"](this);\r\n        this.isActive = false;\r\n    }\r\n\r\n    getNewValue() {\r\n        /* chit */\r\n        //const value = (results.length) ? results.shift() : Math.ceil(Math.random() * 6);\r\n        const value = (checkChit() && Math.random() < 0.25) ? 6 : Math.ceil(Math.random() * 6);\r\n\r\n        switch(value) {\r\n            case 1: \r\n                this.framePoint.x = 0;\r\n                this.framePoint.y = (Math.random() < 0.5) ? 4 * this.frameSize : 12 * this.frameSize;\r\n                break;\r\n            case 2:\r\n                this.framePoint.x = 4 * this.frameSize;\r\n                this.framePoint.y = (Math.random() < 0.5) ? 4 * this.frameSize : 12 * this.frameSize;\r\n                break;\r\n            case 5:\r\n                this.framePoint.x = 12 * this.frameSize;\r\n                this.framePoint.y = (Math.random() < 0.5) ? 4 * this.frameSize : 12 * this.frameSize;\r\n                break;\r\n            case 6:\r\n                this.framePoint.x = 8 * this.frameSize;\r\n                this.framePoint.y = (Math.random() < 0.5) ? 4 * this.frameSize : 12 * this.frameSize;\r\n                break;\r\n            case 3:\r\n                this.framePoint.x = Math.floor(Math.random() * 4) * 4 * this.frameSize;\r\n                this.framePoint.y = 0;\r\n                break;\r\n            case 4:\r\n                this.framePoint.x = Math.floor(Math.random() * 4) * 4 * this.frameSize;\r\n                this.framePoint.y = 8 * this.frameSize;\r\n                break;\r\n            default: value = 6;\r\n        }\r\n        return value;\r\n    }\r\n\r\n    throw() {\r\n        // \r\n        if(this.framePath.length) return 0;\r\n\r\n        let turnsOnPath = '';\r\n        while (turnsOnPath.length < this.framePathSize) {\r\n            turnsOnPath += ('' + Math.random()).slice(2);\r\n        }\r\n\r\n        this.value = this.getNewValue();\r\n        this.framePath.push(this.framePoint);\r\n\r\n        let direction = Math.floor(Math.random() * 8);\r\n        let {x, y} = this.framePoint;\r\n        const maxXY = 15 * this.frameSize;\r\n\r\n        for (let i = 0; i < this.framePathSize; i++) {\r\n            if (direction !== 0 && direction !== 4) {\r\n                x += (direction < 4) ? this.frameSize : -this.frameSize;\r\n                if (x < 0) x = maxXY;\r\n                if (x > maxXY) x = 0;\r\n            }\r\n            if (direction !== 2 && direction !== 6) {\r\n                y += (direction > 2 && direction < 6) ? this.frameSize : -this.frameSize;\r\n                if (y < 0) y = maxXY;\r\n                if (y > maxXY) y = 0;\r\n            }\r\n\r\n            this.framePath.push( {x, y} );\r\n\r\n            if (+turnsOnPath[i] < 2) {\r\n                direction--;\r\n                if (direction < 0) direction = 7;\r\n            }\r\n            if (+turnsOnPath[i] > 7) {\r\n                direction++;\r\n                if (direction > 7) direction = 0;\r\n            }\r\n        }\r\n    }\r\n\r\n    update(dt) {\r\n        if (this.isActive) this.pointer.update(dt);\r\n\r\n        if (this.framePath.length) {\r\n            this.frameTimeout -= dt;\r\n            if (this.frameTimeout <= 0) {\r\n                this.frameTimeout += this.frameDuration;\r\n                this.framePoint = this.framePath.pop();\r\n            }\r\n        }\r\n        _render__WEBPACK_IMPORTED_MODULE_3__[\"default\"].context.drawImage(this.img,\r\n            this.framePoint.x, this.framePoint.y, this.frameSize, this.frameSize,\r\n            this.x, this.y, this.frameSize, this.frameSize);\r\n    }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Dice);\n\n//# sourceURL=webpack://webpack-template/./dev_js/classes/Dice.js?");

/***/ }),

/***/ "./dev_js/classes/DicePointer.js":
/*!***************************************!*\
  !*** ./dev_js/classes/DicePointer.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _assets__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../assets */ \"./dev_js/assets.js\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../constants */ \"./dev_js/constants.js\");\n/* harmony import */ var _render__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../render */ \"./dev_js/render.js\");\n\r\n\r\n\r\n\r\nclass DicePointer {\r\n    constructor(dice) {\r\n        this.image = _assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES.dicePointer;\r\n        this.x = dice.x + 41;\r\n        this.y = dice.y + 41;\r\n        this.scaleDuration = _constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].diceActiveDuration / 2;\r\n        this.maxSize = 160;\r\n        this.minSize = 80;\r\n        this.scaleRate = (this.maxSize - this.minSize) / this.scaleDuration;\r\n        this.isScaleUp = true;\r\n        this.size = this.minSize;\r\n        this.halfSize = this.size / 2;\r\n    }\r\n\r\n    setMinSize() {\r\n        this.size = this.minSize;\r\n        this.halfSize = this.size / 2;\r\n    }\r\n\r\n    update(dt) {\r\n        if (this.isScaleUp) {\r\n            this.size += this.scaleRate * dt;\r\n            if (this.size >= this.maxSize) this.isScaleUp = false;\r\n        } else  {\r\n            this.size -= this.scaleRate * dt;\r\n            if (this.size <= this.minSize) this.isScaleUp = true;\r\n        }\r\n        this.halfSize = this.size / 2;\r\n\r\n        _render__WEBPACK_IMPORTED_MODULE_2__[\"default\"].context.drawImage(this.image, this.x-this.halfSize, this.y-this.halfSize, this.size, this.size);\r\n    }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DicePointer);\n\n//# sourceURL=webpack://webpack-template/./dev_js/classes/DicePointer.js?");

/***/ }),

/***/ "./dev_js/classes/EndMenu.js":
/*!***********************************!*\
  !*** ./dev_js/classes/EndMenu.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _assets__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../assets */ \"./dev_js/assets.js\");\n/* harmony import */ var _render__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../render */ \"./dev_js/render.js\");\n/* harmony import */ var _sound__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../sound */ \"./dev_js/sound.js\");\n/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Text */ \"./dev_js/classes/Text.js\");\n\r\n\r\n\r\n\r\n\r\nclass EndMenu {\r\n    constructor(endGameCallback, data) {\r\n        this.endGameCallback = endGameCallback;\r\n        \r\n        this.canvas = document.createElement('canvas');\r\n        this.context = this.canvas.getContext('2d');\r\n        this.canvas.width = _render__WEBPACK_IMPORTED_MODULE_1__[\"default\"].width;\r\n        this.canvas.height = _render__WEBPACK_IMPORTED_MODULE_1__[\"default\"].height;\r\n\r\n        /* 1800 x 1800 */\r\n        this.button = {x: _render__WEBPACK_IMPORTED_MODULE_1__[\"default\"].x - 360, y: _render__WEBPACK_IMPORTED_MODULE_1__[\"default\"].y + 180, width: 720, height: 180};\r\n\r\n        this.TextStyle = {\r\n            size: 120,\r\n            family: 'clip',\r\n            weight: '600',\r\n            color: '#000000',\r\n            align: 'center'\r\n        };\r\n\r\n        const text = (data.isBot) ? 'COMPUTER WIN!': 'PLAYER WIN!';\r\n\r\n        this.context.drawImage(_assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES.pointerPlayerH, 0, 0, 480, 120, _render__WEBPACK_IMPORTED_MODULE_1__[\"default\"].x - 360, _render__WEBPACK_IMPORTED_MODULE_1__[\"default\"].y - 360, 720, 180);\r\n        this.playerLabel = new _Text__WEBPACK_IMPORTED_MODULE_3__[\"default\"](text, _render__WEBPACK_IMPORTED_MODULE_1__[\"default\"].x, _render__WEBPACK_IMPORTED_MODULE_1__[\"default\"].x - 340, this.TextStyle);\r\n        this.playerLabel.draw(this.context);\r\n\r\n        this.context.drawImage(data.image, _render__WEBPACK_IMPORTED_MODULE_1__[\"default\"].x - 90, _render__WEBPACK_IMPORTED_MODULE_1__[\"default\"].y - 90, 180, 180);\r\n\r\n        this.context.drawImage(_assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES.menuButton, this.button.x, this.button.y, this.button.width, this.button.height);\r\n        this.buttonText = new _Text__WEBPACK_IMPORTED_MODULE_3__[\"default\"](\r\n            'CONTINUE', this.button.x + 360, this.button.y + 10, {\r\n                size: 140,\r\n                family: 'clip',\r\n                weight: '600',\r\n                color: '#ff00bc',\r\n                align: 'center'\r\n            }\r\n        );\r\n        this.buttonText.draw(this.context);\r\n\r\n        (0,_sound__WEBPACK_IMPORTED_MODULE_2__.playSound)((data.isBot) ? _assets__WEBPACK_IMPORTED_MODULE_0__.SOUNDS.lose : _assets__WEBPACK_IMPORTED_MODULE_0__.SOUNDS.win);\r\n    }\r\n\r\n    click(x, y) {\r\n        if (x > this.button.x\r\n        && x < this.button.x + this.button.width\r\n        && y > this.button.y\r\n        && y < this.button.y + this.button.height) {\r\n            (0,_sound__WEBPACK_IMPORTED_MODULE_2__.playSound)(_assets__WEBPACK_IMPORTED_MODULE_0__.SOUNDS.menuClick);\r\n            _render__WEBPACK_IMPORTED_MODULE_1__[\"default\"].canvas.style.opacity = 0;\r\n            setTimeout(() => {\r\n                this.endGameCallback();\r\n                _render__WEBPACK_IMPORTED_MODULE_1__[\"default\"].canvas.style.opacity = 1;\r\n            }, 1000);\r\n        }\r\n    }\r\n\r\n    update() {\r\n        _render__WEBPACK_IMPORTED_MODULE_1__[\"default\"].context.drawImage(this.canvas, 0, 0);\r\n    }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (EndMenu);\n\n//# sourceURL=webpack://webpack-template/./dev_js/classes/EndMenu.js?");

/***/ }),

/***/ "./dev_js/classes/Layer.js":
/*!*********************************!*\
  !*** ./dev_js/classes/Layer.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _render__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../render */ \"./dev_js/render.js\");\n\r\n\r\nlet layerCount = 0;\r\n\r\nclass Layer {\r\n    constructor(name = '', zIndex = _render__WEBPACK_IMPORTED_MODULE_0__[\"default\"].layers.length, objects = []) {\r\n        this.name = name || 'layer' + layerCount++;\r\n        this.zIndex = zIndex;\r\n        this.objects = objects;\r\n\r\n        if (zIndex === _render__WEBPACK_IMPORTED_MODULE_0__[\"default\"].layers.length) _render__WEBPACK_IMPORTED_MODULE_0__[\"default\"].layers.push(this);\r\n        else {\r\n            _render__WEBPACK_IMPORTED_MODULE_0__[\"default\"].layers.splice(zIndex, 0, this);\r\n            _render__WEBPACK_IMPORTED_MODULE_0__[\"default\"].layers.forEach( (layer, index) => layer.zIndex = index );\r\n        }\r\n    }\r\n\r\n    update(deltaTime) {\r\n        this.objects.forEach( object => object.update(deltaTime) );\r\n    }\r\n\r\n    remove(object) {\r\n        this.objects = this.objects.filter(obj => obj !== object);\r\n    }\r\n\r\n    add(object) {\r\n        this.objects.push(object);\r\n    }\r\n\r\n    moveUp(object) {\r\n        this.objects = this.objects.filter(obj => obj !== object);\r\n        this.objects.push(object);\r\n    }\r\n\r\n    clear() {\r\n        this.objects = [];\r\n    }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Layer);\n\n//# sourceURL=webpack://webpack-template/./dev_js/classes/Layer.js?");

/***/ }),

/***/ "./dev_js/classes/Player.js":
/*!**********************************!*\
  !*** ./dev_js/classes/Player.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _assets__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../assets */ \"./dev_js/assets.js\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../constants */ \"./dev_js/constants.js\");\n/* harmony import */ var _main__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../main */ \"./dev_js/main.js\");\n/* harmony import */ var _render__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../render */ \"./dev_js/render.js\");\n/* harmony import */ var _sound__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../sound */ \"./dev_js/sound.js\");\n/* harmony import */ var _Timer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Timer */ \"./dev_js/classes/Timer.js\");\n/* harmony import */ var _Token__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Token */ \"./dev_js/classes/Token.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass Player {\r\n    constructor(tokenImage, startPoint, isBot) {\r\n        this.getPointerPosition(startPoint);\r\n        this.image = (startPoint % 2 === 0) ? _assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES.pointerPlayerH : _assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES.pointerPlayerV;\r\n        this.tokenImage = tokenImage;\r\n        this.frameWidth = (startPoint % 2 === 0) ? 480 : 120;\r\n        this.frameHeight = (startPoint % 2 === 0) ? 120 : 480;\r\n        this.frame = 0;\r\n        this.fps = 30;\r\n        this.frameDuration = Math.floor(1000 / this.fps);\r\n        this.frameTimeout = this.frameDuration;\r\n        this.frames = this.getFrames();\r\n\r\n        this.dices = [];\r\n        this.dice = null;\r\n        this.isGetDouble = false;\r\n        this.turns = 0;\r\n        this.startPoint = startPoint;\r\n        this.tokens = [];\r\n\r\n        this.isBot = isBot;\r\n\r\n        this.layer = _render__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getLayer('players');\r\n\r\n        this.generateTokens();\r\n    }\r\n\r\n    getPointerPosition(startPoint) {\r\n        if (startPoint % 2 === 0) {\r\n            this.x = _constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].boardOffset + _constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].ceilSize * 5.5;\r\n            if (startPoint === 0) this.y = _constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].boardOffset;\r\n            else this.y = _constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].boardOffset + _constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].ceilSize * 14;\r\n        } else {\r\n            this.y = _constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].boardOffset + _constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].ceilSize * 5.5;\r\n            if (startPoint === 3) this.x = _constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].boardOffset;\r\n            else this.x = _constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].boardOffset + _constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].ceilSize * 14;\r\n        }\r\n    }\r\n\r\n    getFrames() {\r\n        const frames = [];\r\n        for(let y = 0; y < this.image.height; y += this.frameHeight) {\r\n            for(let x = 0; x < this.image.width; x += this.frameWidth) {\r\n                frames.push({x, y});\r\n            }\r\n        }\r\n        return frames;\r\n    }\r\n\r\n    generateTokens() {\r\n        const tokensLayer = _render__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getLayer('tokens');\r\n        for(let i = 0; i < 4; i++) {\r\n            const token = new _Token__WEBPACK_IMPORTED_MODULE_6__[\"default\"](this);\r\n            this.tokens.push(token);\r\n            tokensLayer.add(token);\r\n        }\r\n    }\r\n\r\n    startTurn() {\r\n        this.layer.add(this);\r\n        this.throwDices();\r\n    }\r\n\r\n    throwDices() {\r\n        this.turns++;\r\n        (0,_sound__WEBPACK_IMPORTED_MODULE_4__.playSound)(_assets__WEBPACK_IMPORTED_MODULE_0__.SOUNDS.dice2);\r\n        _main__WEBPACK_IMPORTED_MODULE_2__.game.dices.forEach(dice => dice.throw());\r\n        this.isGetDouble = _main__WEBPACK_IMPORTED_MODULE_2__.game.dices[0].value === _main__WEBPACK_IMPORTED_MODULE_2__.game.dices[1].value;\r\n        if (_main__WEBPACK_IMPORTED_MODULE_2__.game.dices[0].value >= _main__WEBPACK_IMPORTED_MODULE_2__.game.dices[1].value) this.dices = [1, 0];\r\n        else this.dices = [0, 1];\r\n\r\n        //setTimeout();\r\n        new _Timer__WEBPACK_IMPORTED_MODULE_5__[\"default\"](() => this.useDice(), _constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].diceThrowDuration);\r\n    }\r\n\r\n    useDice() {\r\n        this.dice = _main__WEBPACK_IMPORTED_MODULE_2__.game.dices[ this.dices.pop() ];\r\n        this.dice.isActive = true;\r\n\r\n        const availableTokens = [];\r\n        /*\r\n        1) проверить каждый токен, способен ли он использовать данный дайс\r\n          - если да - пометить токен зеленым маркером\r\n        */\r\n        this.tokens.forEach(token => {\r\n            token.getPath(this.dice.value);\r\n            if (token.isAvailable) availableTokens.push(token);\r\n        });\r\n\r\n        if (!availableTokens.length) {\r\n            new _Timer__WEBPACK_IMPORTED_MODULE_5__[\"default\"](() => this.diceFinished(), _constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].diceActiveDuration);\r\n        } else if (this.isBot) new _Timer__WEBPACK_IMPORTED_MODULE_5__[\"default\"](() => this.botActivation(availableTokens), _constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].diceActiveDuration);\r\n    }\r\n\r\n    botActivation(availableTokens) {\r\n        // one token available\r\n        if (availableTokens.length === 1) {\r\n            availableTokens[0].activation();\r\n            return;\r\n        }\r\n\r\n        // first [0] index -> is activated\r\n        const goodArray = []; \r\n        const normalArray = []; \r\n        const badArray = [];\r\n\r\n        availableTokens.sort(() => Math.random() - 0.5);\r\n\r\n        for (let i = 0; i < availableTokens.length; i++) {\r\n            const token = availableTokens[i];\r\n            const target = token.path[token.path.length - 1];\r\n\r\n            // TEST\r\n            if (_main__WEBPACK_IMPORTED_MODULE_2__.game.board.toilets.includes(token.container)) {\r\n                if (token.checkCeilPlayerTokens(_main__WEBPACK_IMPORTED_MODULE_2__.game.board.ceils, token.container[2].targetIndex, token.player))\r\n                    console.log('MOVE IN TOILET AND FRIENDLY TOKEN ON EXIT');\r\n                else\r\n                    console.log('JUST MOVE IN TOILET');\r\n            }\r\n\r\n            /*\r\n            console.log(i, 'current:',\r\n                (token.container.length === 4) ? (token.container === token.home) ? 'home' : 'base' :\r\n                (target.container.length === 3) ? 'toilet' : 'main', token.index,\r\n                'target:', \r\n                (target.container.length === 4) ? (target.container === token.home) ? 'home' : 'base' :\r\n                (target.container.length === 3) ? 'toilet' : 'main', target.index);\r\n            */\r\n\r\n            // (4)\r\n            // check entry in start ceil\r\n            if (token.container === token.reserve\r\n            // check go to corner\r\n            || (target.container === _main__WEBPACK_IMPORTED_MODULE_2__.game.board.ceils && target.container[target.index].type === 'corner')\r\n            // check entry in home or move in home\r\n            || (target.container === token.home)\r\n            // go to port forward\r\n            || (target.container === _main__WEBPACK_IMPORTED_MODULE_2__.game.board.ceils && target.container[target.index].type === 'port'\r\n            && target.container[target.index].targetIndex % 2 === 0 /* 1 - back; 0 - forward */)) {\r\n                goodArray.push(token);\r\n            } else\r\n            // (0)\r\n            // check entry in toilet\r\n            if ((_main__WEBPACK_IMPORTED_MODULE_2__.game.board.toilets.includes(target.container) && target.index === 0)\r\n            // check if in toilet and friendly token under exit\r\n            || (_main__WEBPACK_IMPORTED_MODULE_2__.game.board.toilets.includes(token.container)\r\n            && token.checkCeilPlayerTokens(_main__WEBPACK_IMPORTED_MODULE_2__.game.board.ceils, token.container[2].targetIndex, token.player))) {\r\n                badArray.push(token);\r\n            } else\r\n            // (1)\r\n            // go to any start ceil\r\n            if ((target.container === _main__WEBPACK_IMPORTED_MODULE_2__.game.board.ceils && target.container[target.index].type === 'home')\r\n            // go to port back\r\n            || (target.container === _main__WEBPACK_IMPORTED_MODULE_2__.game.board.ceils && target.container[target.index].type === 'port'\r\n            && target.container[target.index].targetIndex % 2 === 1 /* 1 - back; 0 - forward */)\r\n            // now on corner\r\n            || (this.container === _main__WEBPACK_IMPORTED_MODULE_2__.game.board.ceils && this.container[this.index].type === 'corner')) {\r\n                badArray.unshift(token);\r\n            } else\r\n            // (2)\r\n            // check ceil under toilet exit\r\n            if (target.container === _main__WEBPACK_IMPORTED_MODULE_2__.game.board.ceils && target.container[target.index].type === 'exit') {\r\n                normalArray.push(token);\r\n            }\r\n            // (3)\r\n            else {\r\n                normalArray.unshift(token);\r\n            }\r\n        }\r\n\r\n        if (goodArray.length) goodArray[0].activation();\r\n        else if (normalArray.length) normalArray[0].activation();\r\n        else badArray[0].activation();\r\n    }\r\n\r\n    diceFinished() {\r\n        this.dice.isActive = false;\r\n        this.dice.pointer.setMinSize();\r\n        if (this.dices.length && !_main__WEBPACK_IMPORTED_MODULE_2__.game.isEnd) this.useDice();\r\n        else if (this.isGetDouble && !_main__WEBPACK_IMPORTED_MODULE_2__.game.isEnd && this.turns < 3) this.throwDices();\r\n        else this.endTurn();\r\n    }\r\n\r\n    endTurn() { /*console.log('end turn');*/\r\n        this.turns = 0;\r\n        this.layer.remove(this);\r\n        _main__WEBPACK_IMPORTED_MODULE_2__.game.nextTurn();\r\n    }\r\n\r\n    update(dt) {\r\n        this.frameTimeout -= dt;\r\n        if (this.frameTimeout <= 0) {\r\n            this.frameTimeout += this.frameDuration;\r\n            this.frame++;\r\n            if (this.frame === this.frames.length) this.frame = 0;\r\n        }\r\n        _render__WEBPACK_IMPORTED_MODULE_3__[\"default\"].context.drawImage(\r\n            this.image,\r\n            this.frames[this.frame].x, this.frames[this.frame].y, this.frameWidth, this.frameHeight,\r\n            this.x, this.y, this.frameWidth, this.frameHeight\r\n        );\r\n    }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Player);\n\n//# sourceURL=webpack://webpack-template/./dev_js/classes/Player.js?");

/***/ }),

/***/ "./dev_js/classes/Pointer.js":
/*!***********************************!*\
  !*** ./dev_js/classes/Pointer.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _assets__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../assets */ \"./dev_js/assets.js\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../constants */ \"./dev_js/constants.js\");\n/* harmony import */ var _render__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../render */ \"./dev_js/render.js\");\n\r\n\r\n\r\n\r\nclass Pointer {\r\n    constructor (index, isBot) {\r\n        this.image = isBot ? _assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES.tokenPointerBot : _assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES.tokenPointerHuman;\r\n        this.scaleDuration = _constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].tokenPointerScaleDuration;\r\n        this.maxSize = 148;\r\n        this.minSize = 120;\r\n        this.size = this.minSize + ((this.maxSize - this.minSize) / 4) * index;\r\n        this.halfSize = this.size / 2;\r\n        \r\n        this.scaleRate = (this.maxSize - this.minSize) / this.scaleDuration;\r\n        this.direction = 0;\r\n        this.isScaleUp = true;\r\n    }\r\n\r\n    draw(point, dt) {\r\n        if (this.isScaleUp) {\r\n            this.size += this.scaleRate * dt;\r\n            if (this.size >= this.maxSize) {\r\n                this.isScaleUp = false;\r\n                this.size = this.maxSize\r\n            }\r\n        } else  {\r\n            this.size -= this.scaleRate * dt;\r\n            if (this.size <= this.minSize) {\r\n                this.isScaleUp = true;\r\n                this.size = this.minSize\r\n            }\r\n        }\r\n        this.halfSize = this.size / 2;\r\n\r\n        _render__WEBPACK_IMPORTED_MODULE_2__[\"default\"].context.drawImage(this.image, point.x-this.halfSize, point.y-this.halfSize, this.size, this.size);\r\n    }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Pointer);\n\n//# sourceURL=webpack://webpack-template/./dev_js/classes/Pointer.js?");

/***/ }),

/***/ "./dev_js/classes/StartMenu.js":
/*!*************************************!*\
  !*** ./dev_js/classes/StartMenu.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _assets__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../assets */ \"./dev_js/assets.js\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../constants */ \"./dev_js/constants.js\");\n/* harmony import */ var _main__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../main */ \"./dev_js/main.js\");\n/* harmony import */ var _render__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../render */ \"./dev_js/render.js\");\n/* harmony import */ var _sound__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../sound */ \"./dev_js/sound.js\");\n/* harmony import */ var _Text__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Text */ \"./dev_js/classes/Text.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass StartMenu {\r\n    constructor(startGameCallback) {\r\n        this.isStart = false;\r\n        this.startGameCallback = startGameCallback;\r\n        this.state = {\r\n            players: [\r\n                /* if (tokenIndex === Infinity) random */\r\n                { isUsed: true,  isBot: false, tokenIndex: 2},\r\n                { isUsed: true,  isBot: true,  tokenIndex: 11},\r\n                { isUsed: true,  isBot: true,  tokenIndex: 1},\r\n                { isUsed: false, isBot: true,  tokenIndex: Infinity}\r\n            ],\r\n\r\n            tokens: _main__WEBPACK_IMPORTED_MODULE_2__.game.tokens.map((img, index) => index),\r\n        \r\n            music: true,\r\n            effects: true,\r\n\r\n            start: true,\r\n        };\r\n        this.state.players.forEach(player => {\r\n            this.state.tokens = this.state.tokens.filter(token => player.tokenIndex !== token);\r\n        });\r\n\r\n        this.canvas = document.createElement('canvas');\r\n        this.context = this.canvas.getContext('2d');\r\n        this.canvas.width = _render__WEBPACK_IMPORTED_MODULE_3__[\"default\"].width;\r\n        this.canvas.height = _render__WEBPACK_IMPORTED_MODULE_3__[\"default\"].height;\r\n\r\n        /* 1800 x 1800 */\r\n        this.underlay  = {width: 720, height: 180};\r\n        this.button    = {width: 180, height: 180};\r\n\r\n        this.underlay1 = {x: 120,          y: _render__WEBPACK_IMPORTED_MODULE_3__[\"default\"].y - 270};\r\n        this.underlay2 = {x: _render__WEBPACK_IMPORTED_MODULE_3__[\"default\"].x + 60, y: _render__WEBPACK_IMPORTED_MODULE_3__[\"default\"].y - 270};\r\n        this.underlay3 = {x: 120,          y: _render__WEBPACK_IMPORTED_MODULE_3__[\"default\"].y + 90};\r\n        this.underlay4 = {x: _render__WEBPACK_IMPORTED_MODULE_3__[\"default\"].x + 60, y: _render__WEBPACK_IMPORTED_MODULE_3__[\"default\"].y + 90};\r\n\r\n        this.btnP1User = {x: this.underlay1.x + 90,  y: this.underlay1.y, width: this.button.width, height: this.button.height};\r\n        this.btnP1Token= {x: this.underlay1.x + 450, y: this.underlay1.y, width: this.button.width, height: this.button.height};\r\n        \r\n        this.btnP2User = {x: this.underlay2.x + 90,  y: this.underlay2.y, width: this.button.width, height: this.button.height};\r\n        this.btnP2Token= {x: this.underlay2.x + 450, y: this.underlay2.y, width: this.button.width, height: this.button.height};\r\n\r\n        this.btnP3User = {x: this.underlay3.x + 90,  y: this.underlay3.y, width: this.button.width, height: this.button.height};\r\n        this.btnP3Token= {x: this.underlay3.x + 450, y: this.underlay3.y, width: this.button.width, height: this.button.height};\r\n        \r\n        this.btnP4User = {x: this.underlay4.x + 90,  y: this.underlay4.y, width: this.button.width, height: this.button.height};\r\n        this.btnP4Token= {x: this.underlay4.x + 450, y: this.underlay4.y, width: this.button.width, height: this.button.height};\r\n\r\n        this.btnMusic  = {x: this.underlay3.x + 90,  y: this.underlay3.y + 360, width: this.button.width, height: this.button.height};\r\n        this.btnEffects= {x: this.underlay4.x + 450, y: this.underlay4.y + 360, width: this.button.width, height: this.button.height};\r\n        this.btnStart  = {x: _render__WEBPACK_IMPORTED_MODULE_3__[\"default\"].x - 360,           y: this.underlay4.y + 360, width: this.underlay.width, height: this.underlay.height};\r\n\r\n        this.playerTextStyle = {\r\n            size: 60,\r\n            family: 'clip',\r\n            weight: '600',\r\n            color: '#ffffff',\r\n            align: 'center'\r\n        };\r\n\r\n        this.playerLabels = [\r\n            new _Text__WEBPACK_IMPORTED_MODULE_5__[\"default\"]('', this.underlay1.x + 360, this.underlay1.y + 200, this.playerTextStyle),\r\n            new _Text__WEBPACK_IMPORTED_MODULE_5__[\"default\"]('', this.underlay2.x + 360, this.underlay2.y + 200, this.playerTextStyle),\r\n            new _Text__WEBPACK_IMPORTED_MODULE_5__[\"default\"]('', this.underlay3.x + 360, this.underlay3.y + 200, this.playerTextStyle),\r\n            new _Text__WEBPACK_IMPORTED_MODULE_5__[\"default\"]('', this.underlay4.x + 360, this.underlay4.y + 200, this.playerTextStyle),\r\n        ];\r\n\r\n        this.buttonText = new _Text__WEBPACK_IMPORTED_MODULE_5__[\"default\"](\r\n            'СТАРТ', //'START',\r\n            this.btnStart.x + 360, this.btnStart.y + 10, {\r\n                size: 140,\r\n                family: 'clip',\r\n                weight: '600',\r\n                color: '#ff00bc',\r\n                align: 'center'\r\n            }\r\n        );\r\n\r\n        this.labelText = new _Text__WEBPACK_IMPORTED_MODULE_5__[\"default\"](\r\n            'ПАРЧИС', //'PARCHIS', \r\n            _render__WEBPACK_IMPORTED_MODULE_3__[\"default\"].x, _render__WEBPACK_IMPORTED_MODULE_3__[\"default\"].y - 960, {\r\n                size: 540,\r\n                family: 'clip',\r\n                weight: '600',\r\n                color: '#00f66c',\r\n                align: 'center'\r\n            }\r\n        );\r\n\r\n        this.labelSubText = new _Text__WEBPACK_IMPORTED_MODULE_5__[\"default\"](\r\n            'Квадрат', //'Square', \r\n            _render__WEBPACK_IMPORTED_MODULE_3__[\"default\"].x + 320, _render__WEBPACK_IMPORTED_MODULE_3__[\"default\"].y - 600, {\r\n                size: 210,\r\n                family: 'clip',\r\n                weight: '600',\r\n                color: '#ff00bc',\r\n                align: 'center'\r\n            }\r\n        );\r\n\r\n        this.versionText = new _Text__WEBPACK_IMPORTED_MODULE_5__[\"default\"](\r\n            `ВЕРСИЯ: ${_constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].version}`, // `VERSION: ${constants.version}`,\r\n            160, this.canvas.height - 70, {\r\n            size: 68,\r\n            family: 'clip',\r\n            weight: '600',\r\n            color: '#ffffff',\r\n            align: 'left'\r\n        });\r\n\r\n        this.render();\r\n    }\r\n\r\n    updatePlayerLabels() {\r\n        function getText(isUsed, isBot, text) {\r\n            return `${(isUsed) ? (isBot) ? 'компьютер' : 'игрок' : 'без игрока'} ${text}`;\r\n            //return `${(isUsed) ? (isBot) ? 'computer' : 'player' : 'no one'} ${text}`;\r\n        }\r\n\r\n        this.state.players.forEach((player, index) => {\r\n            switch(index) {\r\n                /*\r\n                case 0 : this.playerLabels[index].render(getText(player.isUsed, player.isBot, 'on bottom side')); break;\r\n                case 1 : this.playerLabels[index].render(getText(player.isUsed, player.isBot, 'on left side')); break;\r\n                case 2 : this.playerLabels[index].render(getText(player.isUsed, player.isBot, 'on top side')); break;\r\n                case 3 : this.playerLabels[index].render(getText(player.isUsed, player.isBot, 'on right side')); break;\r\n                */\r\n                case 0 : this.playerLabels[index].render(getText(player.isUsed, player.isBot, 'снизу')); break;\r\n                case 1 : this.playerLabels[index].render(getText(player.isUsed, player.isBot, 'слева')); break;\r\n                case 2 : this.playerLabels[index].render(getText(player.isUsed, player.isBot, 'сверху')); break;\r\n                case 3 : this.playerLabels[index].render(getText(player.isUsed, player.isBot, 'справа')); break;\r\n            }\r\n            this.playerLabels[index].draw(this.context);\r\n        });\r\n    }\r\n\r\n    getPlayerImage(index) {\r\n        if (!this.state.players[index].isUsed) return _assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES.menuNoUser;\r\n        else return (this.state.players[index].isBot) ? _assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES.menuComputer : _assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES.menuPlayer;\r\n    }\r\n\r\n    getTokenImage(index) {\r\n        if (!this.state.players[index].isUsed\r\n        || this.state.players[index].tokenIndex >= _main__WEBPACK_IMPORTED_MODULE_2__.game.tokens.length) return _assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES.menuRandom;\r\n\r\n        const tokenIndex = this.state.players[index].tokenIndex;\r\n        return _main__WEBPACK_IMPORTED_MODULE_2__.game.tokens[tokenIndex];\r\n    }\r\n\r\n    render() {\r\n        this.updateStateStart();\r\n\r\n        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n\r\n        this.labelText.draw(this.context);\r\n        this.labelSubText.draw(this.context);\r\n\r\n        this.context.drawImage( _assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES.pointerPlayerH, 0, 0, 480, 120, this.underlay1.x, this.underlay1.y, this.underlay.width, this.underlay.height);\r\n        this.context.drawImage( _assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES.pointerPlayerH, 0, 0, 480, 120, this.underlay2.x, this.underlay2.y, this.underlay.width, this.underlay.height);\r\n        this.context.drawImage( _assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES.pointerPlayerH, 0, 0, 480, 120, this.underlay3.x, this.underlay3.y, this.underlay.width, this.underlay.height);\r\n        this.context.drawImage( _assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES.pointerPlayerH, 0, 0, 480, 120, this.underlay4.x, this.underlay4.y, this.underlay.width, this.underlay.height);\r\n        \r\n        this.updatePlayerLabels();\r\n\r\n        this.context.drawImage( this.getPlayerImage(0),   this.btnP1User.x,  this.btnP1User.y,  this.button.width,   this.button.height);\r\n        this.context.drawImage( this.getTokenImage(0),    this.btnP1Token.x, this.btnP1Token.y, this.button.width,   this.button.height);\r\n\r\n        this.context.drawImage( this.getPlayerImage(1), this.btnP2User.x,  this.btnP2User.y,  this.button.width,   this.button.height);\r\n        this.context.drawImage( this.getTokenImage(1),     this.btnP2Token.x, this.btnP2Token.y, this.button.width,   this.button.height);\r\n\r\n        this.context.drawImage( this.getPlayerImage(2), this.btnP3User.x,  this.btnP3User.y,  this.button.width,   this.button.height);\r\n        this.context.drawImage( this.getTokenImage(2),  this.btnP3Token.x, this.btnP3Token.y, this.button.width,   this.button.height);\r\n\r\n        this.context.drawImage( this.getPlayerImage(3),   this.btnP4User.x,  this.btnP4User.y,  this.button.width,   this.button.height);\r\n        this.context.drawImage( this.getTokenImage(3),   this.btnP4Token.x, this.btnP4Token.y, this.button.width,   this.button.height);\r\n\r\n        this.context.drawImage( (this.state.music) ? _assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES.menuMusicOn : _assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES.menuMusicOff,  this.btnMusic.x,   this.btnMusic.y,   this.button.width,   this.button.height);\r\n        this.context.drawImage( (this.state.start) ? _assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES.menuButton : _assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES.menuButtonLock, this.btnStart.x,   this.btnStart.y,   this.underlay.width, this.underlay.height);\r\n        this.context.drawImage( (this.state.effects) ? _assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES.menuEffectsOn : _assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES.menuEffectsOff, this.btnEffects.x, this.btnEffects.y, this.button.width,   this.button.height);\r\n\r\n        this.buttonText.draw(this.context);\r\n\r\n        this.context.drawImage(\r\n            _assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES.menuLogo,\r\n            _render__WEBPACK_IMPORTED_MODULE_3__[\"default\"].x + 240,\r\n            this.canvas.height - 160\r\n        );\r\n\r\n        this.versionText.draw(this.context)\r\n    }\r\n\r\n    checkClickButton(clickX, clickY, button) {\r\n        if (clickX > button.x\r\n        && clickX < button.x + button.width\r\n        && clickY > button.y\r\n        && clickY < button.y + button.height) return true;\r\n        return false;\r\n    }\r\n\r\n    click(x, y) {\r\n        if (this.isStart) return;\r\n        // start game\r\n        if (this.checkClickButton(x, y, this.btnStart)\r\n        && this.state.start) this.startGame();\r\n\r\n        // music\r\n        if (this.checkClickButton(x, y, this.btnMusic)) {\r\n            this.state.music = !this.state.music;\r\n            (0,_sound__WEBPACK_IMPORTED_MODULE_4__.setSoundState)(this.state);\r\n            (0,_sound__WEBPACK_IMPORTED_MODULE_4__.playSound)(_assets__WEBPACK_IMPORTED_MODULE_0__.SOUNDS.menuMusic);\r\n            this.render();\r\n        }\r\n\r\n        // effects\r\n        if (this.checkClickButton(x, y, this.btnEffects)) {\r\n            this.state.effects = !this.state.effects;\r\n            (0,_sound__WEBPACK_IMPORTED_MODULE_4__.setSoundState)(this.state);\r\n            (0,_sound__WEBPACK_IMPORTED_MODULE_4__.playSound)(_assets__WEBPACK_IMPORTED_MODULE_0__.SOUNDS.menuEffects);\r\n            this.render();\r\n        }\r\n\r\n        if (this.checkClickButton(x, y, this.btnP1User)) this.clickPlayer(0);\r\n        if (this.checkClickButton(x, y, this.btnP1Token)) this.clickToken(0);\r\n\r\n        if (this.checkClickButton(x, y, this.btnP2User)) this.clickPlayer(1);\r\n        if (this.checkClickButton(x, y, this.btnP2Token)) this.clickToken(1);\r\n\r\n        if (this.checkClickButton(x, y, this.btnP3User)) this.clickPlayer(2);\r\n        if (this.checkClickButton(x, y, this.btnP3Token)) this.clickToken(2);\r\n        \r\n        if (this.checkClickButton(x, y, this.btnP4User)) this.clickPlayer(3);\r\n        if (this.checkClickButton(x, y, this.btnP4Token)) this.clickToken(3);\r\n    }\r\n\r\n    updateStateStart() {\r\n        let players = 0;\r\n        this.state.players.forEach(player => {\r\n            if (player.isUsed) players++;\r\n        });\r\n        this.state.start = players > 1;\r\n    }\r\n\r\n    clickPlayer(index) {\r\n        (0,_sound__WEBPACK_IMPORTED_MODULE_4__.playSound)(_assets__WEBPACK_IMPORTED_MODULE_0__.SOUNDS.menuClick);\r\n\r\n        if(this.state.players[index].isUsed) {\r\n            if(this.state.players[index].isBot) {\r\n                this.state.players[index].isUsed = false;\r\n                this.state.players[index].isBot = false;\r\n                if (isFinite(this.state.players[index].tokenIndex)) {\r\n                    this.state.tokens.push(this.state.players[index].tokenIndex);\r\n                    this.state.players[index].tokenIndex = Infinity;\r\n                }\r\n            } else {\r\n                this.state.players[index].isBot = true;\r\n            }\r\n        } else {\r\n            this.state.players[index].isUsed = true;\r\n        }\r\n        this.render();\r\n    }\r\n\r\n    clickToken(index) {\r\n        (0,_sound__WEBPACK_IMPORTED_MODULE_4__.playSound)(_assets__WEBPACK_IMPORTED_MODULE_0__.SOUNDS.menuToken);\r\n\r\n        if (!this.state.players[index].isUsed) {\r\n            this.state.players[index].isUsed = true;\r\n            return this.render();\r\n        }\r\n        if (isFinite(this.state.players[index].tokenIndex)) {\r\n            this.state.tokens.push(this.state.players[index].tokenIndex);\r\n        }\r\n        this.state.players[index].tokenIndex = this.state.tokens.shift();\r\n        this.render();\r\n    }\r\n\r\n    startGame() {\r\n        this.isStart = true;\r\n        (0,_sound__WEBPACK_IMPORTED_MODULE_4__.playSound)(_assets__WEBPACK_IMPORTED_MODULE_0__.SOUNDS.menuStart);\r\n        this.state.players.forEach(player=> {\r\n            if(!isFinite(player.tokenIndex)) {\r\n                this.state.tokens.sort(() => Math.random() - 0.5);\r\n                player.tokenIndex = this.state.tokens.pop();\r\n            }\r\n        });\r\n        _render__WEBPACK_IMPORTED_MODULE_3__[\"default\"].canvas.style.opacity = 0;\r\n        setTimeout(() => {\r\n            _render__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getLayer('menu').clear();\r\n            this.startGameCallback(this.state);\r\n            setTimeout(() => _render__WEBPACK_IMPORTED_MODULE_3__[\"default\"].canvas.style.opacity = 1, 500);\r\n        }, 1000);\r\n    }\r\n\r\n    update() {\r\n        _render__WEBPACK_IMPORTED_MODULE_3__[\"default\"].context.drawImage(this.canvas, 0, 0);\r\n    }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (StartMenu);\n\n//# sourceURL=webpack://webpack-template/./dev_js/classes/StartMenu.js?");

/***/ }),

/***/ "./dev_js/classes/Text.js":
/*!********************************!*\
  !*** ./dev_js/classes/Text.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass Text {\r\n    constructor(text = '', x = 0, y = 0, options ) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.weight = options.weight || 'normal';\r\n        this.style = options.style || 'normal';\r\n        this.size = options.size || 24;\r\n        this.family = options.family || 'Arial';\r\n        this.color = options.color || '#00ff00';\r\n        this.strokeColor = options.strokeColor || '#00000000';\r\n        this.strokeWidth = options.strokeWidth || 0;\r\n        this.align = options.align ? this.getTextAlign( options.align ) : 'left';\r\n        this.offsetX = 0;\r\n        this.font = `${this.weight} ${this.style} ${this.size}px ${this.family}, Arial, sans-serif`;\r\n        this.img = document.createElement('canvas');\r\n        this.ctx = this.img.getContext('2d');\r\n        this.img.width = this.getTextWidth(text);\r\n        this.img.height = this.size;\r\n        this.isExist = true;\r\n\r\n        this.render(text);\r\n    }\r\n\r\n    getTextAlign(align) {\r\n        switch(align) {\r\n            case 'right': return 'right';\r\n            case 'center':  return 'center';\r\n            default : return 'left';\r\n        }\r\n    }\r\n\r\n    getTextWidth(text) {\r\n        this.ctx.font = this.font;\r\n        return this.ctx.measureText(text || ' ').width;\r\n    }\r\n\r\n    render(text) {\r\n        this.ctx.clearRect(0, 0, this.img.width, this.img.height);\r\n\r\n        this.img.width =  this.getTextWidth(text);\r\n\r\n        if (this.align === 'right') {\r\n            this.offsetX = this.img.width;\r\n        }\r\n        if (this.align === 'center') {\r\n            this.offsetX = Math.floor(this.img.width / 2);\r\n        }\r\n\r\n        this.ctx.font = this.font;\r\n        this.ctx.textBaseline = 'top';\r\n        this.ctx.textAlign = this.align;\r\n        this.ctx.fillStyle = this.color;\r\n        this.ctx.fillText(text || ' ', this.offsetX, 0);\r\n        if (this.strokeWidth) {\r\n            this.ctx.strokeStyle = this.strokeColor;\r\n            this.ctx.lineWidth = this.strokeWidth;\r\n            this.ctx.strokeText(text || ' ', this.offsetX, 0);\r\n        }\r\n    }\r\n\r\n    draw(context) {\r\n        context.drawImage( this.img, this.x - this.offsetX, this.y);\r\n    }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Text);\n\n//# sourceURL=webpack://webpack-template/./dev_js/classes/Text.js?");

/***/ }),

/***/ "./dev_js/classes/Timer.js":
/*!*********************************!*\
  !*** ./dev_js/classes/Timer.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _render__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../render */ \"./dev_js/render.js\");\n\r\n\r\nclass Timer {\r\n    constructor(callback, milliseconds) {\r\n        this.callback = callback;\r\n        this.milliseconds = milliseconds;\r\n        _render__WEBPACK_IMPORTED_MODULE_0__[\"default\"].layers[0].add(this);\r\n    }\r\n\r\n    update(dt) {\r\n        this.milliseconds -= dt;\r\n        if (this.milliseconds <= 0) {\r\n            setTimeout(() => this.callback(), 0);\r\n            _render__WEBPACK_IMPORTED_MODULE_0__[\"default\"].layers[0].remove(this);\r\n        }\r\n    }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Timer);\n\n//# sourceURL=webpack://webpack-template/./dev_js/classes/Timer.js?");

/***/ }),

/***/ "./dev_js/classes/Token.js":
/*!*********************************!*\
  !*** ./dev_js/classes/Token.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _render__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../render */ \"./dev_js/render.js\");\n/* harmony import */ var _main__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../main */ \"./dev_js/main.js\");\n/* harmony import */ var _Pointer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Pointer */ \"./dev_js/classes/Pointer.js\");\n/* harmony import */ var _assets__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../assets */ \"./dev_js/assets.js\");\n/* harmony import */ var _Timer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Timer */ \"./dev_js/classes/Timer.js\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../constants */ \"./dev_js/constants.js\");\n/* harmony import */ var _sound__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../sound */ \"./dev_js/sound.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass Token {\r\n    constructor(player) { // tokenImage, startPoint, isBot\r\n        this.player = player;\r\n        this.image = player.tokenImage;\r\n        this.maxSize = 128;\r\n        this.minSize = 96;\r\n        this.size = this.minSize;\r\n        this.halfSize = this.size / 2;\r\n\r\n        this.startPoint = player.startPoint;\r\n        this.reserve = _main__WEBPACK_IMPORTED_MODULE_1__.game.board.reserves[player.startPoint];\r\n        this.home = _main__WEBPACK_IMPORTED_MODULE_1__.game.board.homes[player.startPoint];\r\n        this.container = this.reserve;\r\n        this.index = this.player.tokens.length;\r\n\r\n        this.x = this.container[this.index].x;\r\n        this.y = this.container[this.index].y;\r\n\r\n        this.stepDuration = _constants__WEBPACK_IMPORTED_MODULE_5__[\"default\"].tokenStepDuration;\r\n        this.halfStepDuration = this.stepDuration / 2;\r\n        this.sizeRate = (this.maxSize - this.minSize) / this.halfStepDuration;\r\n        this.stepTimeout = this.stepDuration;\r\n        this.speed = 0;\r\n        this.steps = 0;\r\n        this.direction = 0;\r\n        this.target = null; // {container: null, index: 0, x: 0, y: 0}\r\n        this.path = []; // [{container: null, index: 0, x: 0, y: 0}]\r\n        this.isGoHome = false;\r\n        this.isBot = player.isBot;\r\n\r\n        this.pointer = new _Pointer__WEBPACK_IMPORTED_MODULE_2__[\"default\"](this.index, this.isBot);\r\n        this.isAvailable = false; // token available to click (activate)\r\n        this.isActive = false; // activated by player (not pushed other token)\r\n    }\r\n\r\n    checkCeilAllTokens(container, index) {\r\n        const playersLength = _main__WEBPACK_IMPORTED_MODULE_1__.game.players.length\r\n        for (let i = 0; i < playersLength; i++) {\r\n            const token = this.checkCeilPlayerTokens(container, index, _main__WEBPACK_IMPORTED_MODULE_1__.game.players[i])\r\n            if (token) return token;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    checkCeilPlayerTokens(container, index, player = this.player) {\r\n        const playerTokensLength = player.tokens.length;\r\n        for (let i = 0; i < playerTokensLength; i++) {\r\n            const token =  player.tokens[i];\r\n            if (token.container === container\r\n            && token.index === index\r\n            && token !== this) {\r\n                return token;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    getPath(points) {\r\n        this.path = [];\r\n\r\n        // check current container\r\n        switch(this.container) {\r\n            case this.reserve : this.checkPathFromReserve(points); break;\r\n            case _main__WEBPACK_IMPORTED_MODULE_1__.game.board.toiletTop :\r\n            case _main__WEBPACK_IMPORTED_MODULE_1__.game.board.toiletRight :\r\n            case _main__WEBPACK_IMPORTED_MODULE_1__.game.board.toiletBottom :\r\n            case _main__WEBPACK_IMPORTED_MODULE_1__.game.board.toiletLeft : this.checkPathInToilet(points); break;\r\n            case this.home: this.checkPathInHome(points); break;\r\n            default : this.checkPathInMainBoard(points); break;\r\n        }\r\n\r\n        // check for activation\r\n        if (this.path.length) this.isAvailable = true;\r\n        else this.isAvailable = false;\r\n    }\r\n\r\n    checkPathFromReserve(points) {\r\n        if (points !== 6) return;\r\n        // check friendly token in start point \r\n        if (!this.checkCeilPlayerTokens(_main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils, this.reserve[0].targetIndex)) {\r\n            this.isGoHome = false; // clear this, if token move to reserve from board\r\n            this.addPathPoint(_main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils, this.reserve[0].targetIndex);\r\n        }\r\n    }\r\n\r\n    checkPathInToilet(points) {\r\n        if (points === this.container[this.index].move) {\r\n            // if it is last toilet point\r\n            if ('targetIndex' in this.container[this.index]) {\r\n                this.addPathPoint(_main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils, this.container[this.index].targetIndex);\r\n            } else {\r\n                this.addPathPoint(this.container, this.index + 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    checkPathInHome(points, index = this.index) {\r\n        const maxSteps = (this.home.length - 1) - index; // 3 - 0 -> 3; 3 - 1 -> 2; 3 - 2 -> 1; 3 - 3 -> 0\r\n        if (maxSteps <= 0 || points > maxSteps) return this.path = [];\r\n        const startIndex = index + 1;\r\n        const lastIndex = index + points;\r\n        for (let i = startIndex; i <= lastIndex; i++) {\r\n            if (this.checkCeilPlayerTokens(this.home, i)) return this.path = [];\r\n            // else (not need after return)   \r\n            this.addPathPoint(this.home, i);\r\n        }\r\n    }\r\n\r\n    checkPathInMainBoard(points) {\r\n        // check start at home inter if token must go home\r\n        if (this.isGoHome\r\n        && _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils[this.index].type === 'home'\r\n        && _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils[this.index].targetIndex === this.startPoint) {\r\n            if (this.checkCeilPlayerTokens(this.home, 0)) return this.path = [];\r\n            // else (not need after return)\r\n            this.addPathPoint(this.home, 0);\r\n            this.checkPathInHome(points - 1, 0); // redirect checking\r\n            return;\r\n        }\r\n\r\n        // check ceils in loop\r\n        let isGoHome = this.isGoHome; // local \"ready go to home\" checker\r\n        let index = this.index;\r\n        while (points > 0) {\r\n            index++; // set next point index in index variable\r\n            if (index >= _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils.length) index = 0;\r\n\r\n            const ceilType = this.container[index].type;\r\n\r\n            // check corner ceil\r\n            if (ceilType === 'corner'\r\n            && this.checkCeilAllTokens(_main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils, index)) return this.path = [];\r\n\r\n            if (ceilType === 'home'\r\n            && isGoHome\r\n            && _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils[index].targetIndex=== this.startPoint) {\r\n                if (this.checkCeilAllTokens(_main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils, index)\r\n                || this.checkCeilPlayerTokens(this.home, 0)) return this.path = [];\r\n                // else (not need after return)\r\n                this.addPathPoint(_main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils, index); // go home ceil\r\n                if (points > 1) {\r\n                    this.addPathPoint(this.home, 0);\r\n                    if (points > 2)this.checkPathInHome(points - 2, 0); // redirect checking\r\n                }\r\n                return;\r\n            }\r\n            \r\n            // check ceil is free, if it is not last step or corner ceil\r\n            if (points > 1) {\r\n                if(this.checkCeilAllTokens(_main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils, index)) return this.path = [];\r\n                // else (not need after return)\r\n                this.addPathPoint(_main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils, index);\r\n            // if it is last step and not corner ceil\r\n            } else {\r\n                // check friendly token in ceil\r\n                if (this.checkCeilPlayerTokens(_main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils, index)) return this.path = [];\r\n                // else (not need after return)\r\n                switch(ceilType) {\r\n                    case 'port' :\r\n                        // check port exit\r\n                        const portIndex = _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils[index].targetIndex;\r\n                        const portTargetIndex = _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ports[portIndex].targetIndex;\r\n                        if (this.checkCeilPlayerTokens(_main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils, portTargetIndex)) return this.path = [];\r\n                        // else (not need after return)\r\n                        this.addPathPoint(_main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils, index);\r\n                        this.addPathPoint(_main__WEBPACK_IMPORTED_MODULE_1__.game.board.ports, portIndex);\r\n                        this.addPathPoint(_main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils, portTargetIndex);\r\n                        break;\r\n\r\n                    case 'toilet' :\r\n                        const toiletIndex = _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils[index].targetIndex;\r\n                        this.addPathPoint(_main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils, index);\r\n                        this.addPathPoint(_main__WEBPACK_IMPORTED_MODULE_1__.game.board.toilets[toiletIndex], 0);\r\n                        break;\r\n\r\n                    default : this.addPathPoint(_main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils, index);\r\n                }\r\n            }\r\n            points--;\r\n        }\r\n    }\r\n\r\n    addPathPoint(container, index) {\r\n        this.path.push({\r\n            container: container,\r\n            index: index,\r\n            x: container[index].x,\r\n            y: container[index].y\r\n        })\r\n    }\r\n\r\n    pushPathInToilet() {\r\n        this.path = [];\r\n        // if it is last toilet point\r\n        if ('targetIndex' in this.container[this.index]) {\r\n            this.addPathPoint(_main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils, this.container[this.index].targetIndex);\r\n        } else {\r\n            this.addPathPoint(this.container, this.index + 1);\r\n        }\r\n        this.startStep();\r\n    }\r\n\r\n    pushPathToReserve() {\r\n        this.path = [];\r\n        const reserveLength = this.reserve.length;\r\n        const reserve = new Array(reserveLength);\r\n        this.player.tokens.forEach(token => {\r\n            if (token.container === this.reserve) reserve[token.index] = true;\r\n        });\r\n        for (let i = 0; i < reserveLength; i++) {\r\n            if (!reserve[i]) {\r\n                this.addPathPoint(this.reserve, i);\r\n                break;\r\n            }\r\n        }\r\n        (0,_sound__WEBPACK_IMPORTED_MODULE_6__.playSound)(_assets__WEBPACK_IMPORTED_MODULE_3__.SOUNDS.destroy);\r\n        this.startStep();\r\n    }\r\n\r\n    activation() {\r\n        if (!this.isAvailable) return;\r\n\r\n        // remove pointers from all tokens\r\n        this.player.tokens.forEach(token => token.isAvailable = false);\r\n        \r\n        this.isActive = true;\r\n\r\n        this.startStep();\r\n    }\r\n\r\n    startStep() {\r\n        // move token to up in layer\r\n        this.player.layer.moveUp(this);\r\n\r\n        this.target = this.path.shift();\r\n\r\n        // check pushing in toilet on end of step, for moving all tokens together\r\n        if (this.target.container === _main__WEBPACK_IMPORTED_MODULE_1__.game.board.toiletTop\r\n        || this.target.container === _main__WEBPACK_IMPORTED_MODULE_1__.game.board.toiletRight\r\n        || this.target.container === _main__WEBPACK_IMPORTED_MODULE_1__.game.board.toiletBottom\r\n        || this.target.container === _main__WEBPACK_IMPORTED_MODULE_1__.game.board.toiletLeft) {\r\n            const otherToken = this.checkCeilAllTokens(this.target.container, this.target.index);\r\n            if (otherToken) otherToken.pushPathInToilet();\r\n        }\r\n\r\n        this.setDirection();\r\n        const distance = this.getDistance();\r\n        this.speed = distance / this.stepDuration;\r\n\r\n        switch (this.container) {\r\n            case this.reserve : (0,_sound__WEBPACK_IMPORTED_MODULE_6__.playSound)(_assets__WEBPACK_IMPORTED_MODULE_3__.SOUNDS.startToken); break;\r\n            case _main__WEBPACK_IMPORTED_MODULE_1__.game.board.toiletTop : \r\n            case _main__WEBPACK_IMPORTED_MODULE_1__.game.board.toiletRight : \r\n            case _main__WEBPACK_IMPORTED_MODULE_1__.game.board.toiletBottom : \r\n            case _main__WEBPACK_IMPORTED_MODULE_1__.game.board.toiletLeft :\r\n                if (this.target.container === _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils) (0,_sound__WEBPACK_IMPORTED_MODULE_6__.playSound)(_assets__WEBPACK_IMPORTED_MODULE_3__.SOUNDS.toiletExit);\r\n                else (0,_sound__WEBPACK_IMPORTED_MODULE_6__.playSound)('toilet');\r\n                break;\r\n            default:\r\n                if (this.target.container === _main__WEBPACK_IMPORTED_MODULE_1__.game.board.toiletTop\r\n                || this.target.container === _main__WEBPACK_IMPORTED_MODULE_1__.game.board.toiletRight\r\n                || this.target.container === _main__WEBPACK_IMPORTED_MODULE_1__.game.board.toiletBottom\r\n                || this.target.container === _main__WEBPACK_IMPORTED_MODULE_1__.game.board.toiletLeft) (0,_sound__WEBPACK_IMPORTED_MODULE_6__.playSound)(_assets__WEBPACK_IMPORTED_MODULE_3__.SOUNDS.toiletStart);\r\n                if (this.target.container === _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ports) (0,_sound__WEBPACK_IMPORTED_MODULE_6__.playSound)(_assets__WEBPACK_IMPORTED_MODULE_3__.SOUNDS.port);\r\n        } \r\n    }\r\n\r\n    setDirection() {\r\n        this.direction = Math.atan2(this.target.y-this.y, this.target.x-this.x);\r\n    }\r\n\r\n    getDistance() {\r\n        let dx = this.target.x - this.x; \r\n        let dy = this.target.y - this.y;\r\n        return Math.sqrt(dx * dx + dy * dy);\r\n    }\r\n\r\n    move(pathSize) {\r\n        this.x += Math.cos(this.direction) * pathSize;\r\n        this.y += Math.sin(this.direction) * pathSize;\r\n    }\r\n\r\n    endStep() {\r\n        this.size = this.minSize;\r\n        this.halfSize = this.size / 2;\r\n        this.stepTimeout = this.stepDuration;\r\n        this.container = this.target.container;\r\n        this.index = this.target.index;\r\n        this.x = this.target.x;\r\n        this.y = this.target.y;\r\n        this.target = null;\r\n\r\n        // check eating enemy\r\n        if (this.container === _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils) {\r\n            const otherToken = this.checkCeilAllTokens(_main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils, this.index);\r\n            if (otherToken) otherToken.pushPathToReserve();\r\n        }\r\n\r\n        if (this.container === this.home && this.index === 0) (0,_sound__WEBPACK_IMPORTED_MODULE_6__.playSound)(_assets__WEBPACK_IMPORTED_MODULE_3__.SOUNDS.home);\r\n        else (0,_sound__WEBPACK_IMPORTED_MODULE_6__.playSound)('step');\r\n\r\n        if (this.path.length) this.startStep();\r\n        else this.endMove();\r\n    }\r\n\r\n    endMove() {\r\n        // checking ready go home\r\n        if (!this.isGoHome) {\r\n            // if not on main board or not in start main board ceil\r\n            if (this.container !== _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils // false\r\n            || this.index !== this.reserve[0].targetIndex) {\r\n                this.isGoHome = true;\r\n            }\r\n        }\r\n        \r\n        // check is all tokens at home win\r\n        if (this.container === this.home) {\r\n            let allAtHome = true\r\n            this.player.tokens.forEach( token => {\r\n                if (token.container !== this.home) allAtHome = false;\r\n            });\r\n            if (allAtHome) _main__WEBPACK_IMPORTED_MODULE_1__.game.isEnd = true;\r\n        }\r\n\r\n        // check corners win\r\n        if (this.container === _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils\r\n        && this.container[this.index].type === 'corner') {\r\n            (0,_sound__WEBPACK_IMPORTED_MODULE_6__.playSound)(_assets__WEBPACK_IMPORTED_MODULE_3__.SOUNDS.corner);\r\n\r\n            let allOnCorners = true;\r\n            this.player.tokens.forEach( token => {\r\n                if (token.container !== _main__WEBPACK_IMPORTED_MODULE_1__.game.board.ceils\r\n                || token.container[token.index].type !== 'corner') allOnCorners = false;\r\n            });\r\n            if (allOnCorners) _main__WEBPACK_IMPORTED_MODULE_1__.game.isEnd = true;\r\n        }\r\n\r\n        if (this.isActive) {\r\n            this.isActive = false;\r\n            new _Timer__WEBPACK_IMPORTED_MODULE_4__[\"default\"](() => this.player.diceFinished(), 1000);\r\n        }\r\n    }\r\n\r\n    update(dt) {\r\n        if (this.isAvailable) this.pointer.draw({x:this.x, y:this.y}, dt);\r\n\r\n        if (this.target) {\r\n            this.stepTimeout -= dt;\r\n\r\n            if (this.stepTimeout > this.halfStepDuration) this.size += this.sizeRate * dt;\r\n            else this.size -= this.sizeRate * dt;\r\n            this.halfSize = this.size / 2;\r\n\r\n            if (this.stepTimeout > 0) this.move(dt * this.speed);\r\n            else this.endStep();\r\n        }\r\n\r\n        _render__WEBPACK_IMPORTED_MODULE_0__[\"default\"].context.drawImage(this.image, this.x - this.halfSize, this.y - this.halfSize, this.size, this.size);\r\n    }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Token);\n\n//# sourceURL=webpack://webpack-template/./dev_js/classes/Token.js?");

/***/ }),

/***/ "./dev_js/classes/View.js":
/*!********************************!*\
  !*** ./dev_js/classes/View.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../constants */ \"./dev_js/constants.js\");\n/* harmony import */ var _main__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../main */ \"./dev_js/main.js\");\n\r\n\r\n\r\nclass View {\r\n\r\n    static instance;\r\n\r\n    constructor() {\r\n        if (View.instance) return View.instance;\r\n\r\n        this.canvas = document.getElementById('canvas');\r\n        this.width = this.canvas.width = _constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].ceilSize * 15 + _constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].boardOffset * 2;\r\n        this.height = this.canvas.height = _constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].ceilSize * 15 + _constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].boardOffset * 2;\r\n        this.sizeRate = 1;\r\n        this.size = 0;\r\n        this.x = Math.round(this.width / 2);\r\n        this.y = Math.round(this.height / 2);\r\n        this.context = this.canvas.getContext('2d');\r\n        this.layers = [];\r\n        \r\n        View.instance = this;\r\n\r\n        this.resize();\r\n    }\r\n\r\n    resize() {\r\n        this.size = (innerWidth > innerHeight) ? innerHeight : innerWidth;\r\n        this.sizeRate = this.width / this.size;\r\n    }\r\n    \r\n    getLayer(name) {\r\n        return this.layers.find(layer => layer.name === name);\r\n    }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (View);\n\n//# sourceURL=webpack://webpack-template/./dev_js/classes/View.js?");

/***/ }),

/***/ "./dev_js/constants.js":
/*!*****************************!*\
  !*** ./dev_js/constants.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst constants = {\r\n    version: '1.0.0',\r\n    ceilSize: 120,\r\n    boardOffset: 20,\r\n\r\n    gameStartDuration: 2500,\r\n\r\n    diceThrowDuration: 1000,\r\n    diceActiveDuration: 800,\r\n    tokenStepDuration: 600,\r\n    tokenPointerScaleDuration: 600,\r\n};\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (constants);\n\n//# sourceURL=webpack://webpack-template/./dev_js/constants.js?");

/***/ }),

/***/ "./dev_js/loader.js":
/*!**************************!*\
  !*** ./dev_js/loader.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   loader: () => (/* binding */ loader)\n/* harmony export */ });\n/* harmony import */ var _assets__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./assets */ \"./dev_js/assets.js\");\n\r\n\r\nconst loadState = {\r\n    files : 0,\r\n    loaded : 0,\r\n}\r\n\r\nfunction loader(callbackDone, callbackProgress) {\r\n    let assetsNumber = Object.keys(_assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES).length + Object.keys(_assets__WEBPACK_IMPORTED_MODULE_0__.SOUNDS).length;\r\n    loadState.files = assetsNumber;\r\n    \r\n    for (const sprite in _assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES) {\r\n        const image = new Image();\r\n        image.src = _assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES_PATH + _assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES[sprite];\r\n        image.onload = () => {\r\n            _assets__WEBPACK_IMPORTED_MODULE_0__.SPRITES[sprite] = image;\r\n            updateLoadingState();\r\n        }\r\n    }\r\n    \r\n    for (const sound in _assets__WEBPACK_IMPORTED_MODULE_0__.SOUNDS) {\r\n        const se = new Audio( _assets__WEBPACK_IMPORTED_MODULE_0__.SOUNDS_PATH + _assets__WEBPACK_IMPORTED_MODULE_0__.SOUNDS[sound] );\r\n        se.oncanplaythrough = (event) => {\r\n            event.target.oncanplaythrough = null;\r\n            _assets__WEBPACK_IMPORTED_MODULE_0__.SOUNDS[sound] = se;\r\n            updateLoadingState();\r\n        }\r\n    }\r\n\r\n    function updateLoadingState() {\r\n        loadState.loaded++;\r\n        callbackProgress(loadState);\r\n        assetsNumber--;\r\n        if (!assetsNumber) callbackDone();\r\n    }\r\n};\n\n//# sourceURL=webpack://webpack-template/./dev_js/loader.js?");

/***/ }),

/***/ "./dev_js/main.js":
/*!************************!*\
  !*** ./dev_js/main.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   game: () => (/* binding */ game)\n/* harmony export */ });\n/* harmony import */ var _loader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./loader */ \"./dev_js/loader.js\");\n/* harmony import */ var _assets__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./assets */ \"./dev_js/assets.js\");\n/* harmony import */ var _classes_Board__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./classes/Board */ \"./dev_js/classes/Board.js\");\n/* harmony import */ var _classes_Dice__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./classes/Dice */ \"./dev_js/classes/Dice.js\");\n/* harmony import */ var _classes_Layer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./classes/Layer */ \"./dev_js/classes/Layer.js\");\n/* harmony import */ var _classes_Player__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./classes/Player */ \"./dev_js/classes/Player.js\");\n/* harmony import */ var _render__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./render */ \"./dev_js/render.js\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./constants */ \"./dev_js/constants.js\");\n/* harmony import */ var _classes_Timer__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./classes/Timer */ \"./dev_js/classes/Timer.js\");\n/* harmony import */ var _classes_StartMenu__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./classes/StartMenu */ \"./dev_js/classes/StartMenu.js\");\n/* harmony import */ var _classes_EndMenu__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./classes/EndMenu */ \"./dev_js/classes/EndMenu.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n(0,_loader__WEBPACK_IMPORTED_MODULE_0__.loader)(initGame, loadingProgress);\r\n\r\nconst secondDiv = document.querySelector('.second');\r\n//secondDiv.innerHTML = `Loading...`;\r\nsecondDiv.innerHTML = `Загрузка...`;\r\n\r\nfunction loadingProgress(data) {\r\n    //secondDiv.innerHTML = `Loaded ${data.loaded} / ${data.files} files.`;\r\n    secondDiv.innerHTML = `Загружено ${data.loaded} / ${data.files} файлов.`;\r\n}\r\n\r\n// canvas layers\r\nconst timersLayer = new _classes_Layer__WEBPACK_IMPORTED_MODULE_4__[\"default\"]('timers', 0);\r\nconst boardLayer = new _classes_Layer__WEBPACK_IMPORTED_MODULE_4__[\"default\"]('board', 1);\r\nconst dicesLayer = new _classes_Layer__WEBPACK_IMPORTED_MODULE_4__[\"default\"]('dices', 2);\r\nconst playersLayer = new _classes_Layer__WEBPACK_IMPORTED_MODULE_4__[\"default\"]('players', 3);\r\nconst tokensLayer = new _classes_Layer__WEBPACK_IMPORTED_MODULE_4__[\"default\"]('tokens', 4);\r\nconst menuLayer = new _classes_Layer__WEBPACK_IMPORTED_MODULE_4__[\"default\"]('menu', 5);\r\n\r\nconst game = { \r\n    tokens : [],\r\n    menu: null,\r\n    isStart: false,\r\n    players: [],\r\n    currentTurn: 0,\r\n    board: null,\r\n    dices: [],\r\n    isEnd: false,\r\n\r\n    nextTurn() {\r\n        if (this.isEnd) return this.end();\r\n\r\n        this.currentTurn++\r\n        if (this.currentTurn === this.players.length) this.currentTurn = 0;\r\n\r\n        this.players[this.currentTurn].startTurn();\r\n    },\r\n\r\n    end() {\r\n        game.isStart = false;\r\n        const endMenu = new _classes_EndMenu__WEBPACK_IMPORTED_MODULE_10__[\"default\"](() => {\r\n            game.tokens = [];\r\n            game.isStart = false;\r\n            game.players = [];\r\n            game.currentTurn = 0;\r\n            game.board = null;\r\n            game.dices = [];\r\n            game.isEnd = false;\r\n\r\n            _render__WEBPACK_IMPORTED_MODULE_6__[\"default\"].layers.forEach(layer => layer.clear());\r\n            \r\n            initGame();\r\n        }, {\r\n            isBot : (this.players[this.currentTurn].isBot),\r\n            image : this.players[this.currentTurn].tokenImage\r\n        });\r\n        game.menu = endMenu\r\n        menuLayer.add(endMenu);\r\n        //secondDiv.innerHTML = `PLAYER ${this.currentTurn} WIN!`;\r\n    }\r\n};\r\n\r\nfunction initGame() {\r\n    game.menu = null;\r\n\r\n    game.tokens = [\r\n        _assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.tokenBomb, _assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.tokenButton, _assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.tokenCap, _assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.tokenCoin, _assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.tokenCrystal,\r\n        _assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.tokenDragon, _assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.tokenEye, _assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.tokenHelmet, _assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.tokenMask, _assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.tokenMolecule,\r\n        _assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.tokenMoon, _assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.tokenNut, _assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.tokenPlane, _assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.tokenShark, _assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.tokenShield,\r\n        _assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.tokenSkull, _assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.tokenStone, _assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.tokenToy, _assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.tokenUfo, _assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.tokenWheel,\r\n    ],\r\n    game.menu = new _classes_StartMenu__WEBPACK_IMPORTED_MODULE_9__[\"default\"](startGame);\r\n    menuLayer.add(game.menu);\r\n\r\n    secondDiv.innerHTML = '<div id=\"halpButton\"></div>';\r\n    const helpButton = document.getElementById(\"halpButton\");\r\n    helpButton.style.opacity = 1;\r\n    helpButton.onclick = showHalp;\r\n    helpArr = [\r\n        _assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.halp1, _assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.halp2, _assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.halp3, _assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.halp4, _assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.halp5,\r\n        _assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.halp6, _assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.halp7, _assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.halp8, _assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.halp9, _assets__WEBPACK_IMPORTED_MODULE_1__.SPRITES.halp10,\r\n    ];\r\n}\r\n\r\nfunction startGame(options) {\r\n    game.isStart = true;\r\n\r\n    game.board = new _classes_Board__WEBPACK_IMPORTED_MODULE_2__[\"default\"]();\r\n    boardLayer.add(game.board);\r\n\r\n    game.dices.push( new _classes_Dice__WEBPACK_IMPORTED_MODULE_3__[\"default\"](_render__WEBPACK_IMPORTED_MODULE_6__[\"default\"].x - 63, _render__WEBPACK_IMPORTED_MODULE_6__[\"default\"].y - 63) );\r\n    game.dices.push( new _classes_Dice__WEBPACK_IMPORTED_MODULE_3__[\"default\"](_render__WEBPACK_IMPORTED_MODULE_6__[\"default\"].x + 63, _render__WEBPACK_IMPORTED_MODULE_6__[\"default\"].y + 63) );\r\n    game.dices.forEach(dice => dicesLayer.add(dice));\r\n\r\n    for (let i = 0; i < options.players.length; i++) {\r\n        if(options.players[i].isUsed) {\r\n            const tokenIndex = options.players[i].tokenIndex;\r\n            const startPoint = (i + 2) % options.players.length;\r\n            game.players.push( new _classes_Player__WEBPACK_IMPORTED_MODULE_5__[\"default\"](game.tokens[tokenIndex], startPoint, options.players[i].isBot) );\r\n        }\r\n    }\r\n\r\n    game.currentTurn = Math.floor(Math.random() * game.players.length);\r\n\r\n    new _classes_Timer__WEBPACK_IMPORTED_MODULE_8__[\"default\"](() => game.nextTurn(), _constants__WEBPACK_IMPORTED_MODULE_7__[\"default\"].gameStartDuration);\r\n}\r\n\r\n_render__WEBPACK_IMPORTED_MODULE_6__[\"default\"].canvas.onclick = function(event) {\r\n    const cx = event.offsetX * _render__WEBPACK_IMPORTED_MODULE_6__[\"default\"].sizeRate;\r\n    const cy = event.offsetY * _render__WEBPACK_IMPORTED_MODULE_6__[\"default\"].sizeRate;\r\n    if (game.isStart) gameClick(cx, cy);\r\n    else if (game.menu) game.menu.click(cx, cy);\r\n}\r\n\r\nfunction gameClick(x, y) {\r\n    if (game.players[game.currentTurn].isBot) return;\r\n\r\n    const availableTokens = [];\r\n    let allAvailableTokensInReserve = true;\r\n    game.players[game.currentTurn].tokens.forEach(token => {\r\n        if(token.isAvailable) {\r\n            availableTokens.push(token);\r\n            if(token.container !== token.reserve) {\r\n                allAvailableTokensInReserve = false;\r\n            }\r\n        }\r\n    });\r\n\r\n    if (availableTokens.length === 0) return;\r\n\r\n    if (availableTokens.length === 1) {\r\n        availableTokens[0].activation();\r\n        return;\r\n    }\r\n\r\n    for(let i = 0; i < availableTokens.length; i++) {\r\n        const dx = x - availableTokens[i].x;\r\n        const dy = y - availableTokens[i].y;\r\n        const distance = Math.sqrt(dx*dx + dy*dy);\r\n        if (distance < _constants__WEBPACK_IMPORTED_MODULE_7__[\"default\"].ceilSize / 2) {\r\n            return availableTokens[i].activation();\r\n        }\r\n    }\r\n\r\n    if (allAvailableTokensInReserve) {\r\n        availableTokens[0].activation();\r\n        return;\r\n    }\r\n}\r\n\r\nconst halpDiv = document.getElementById('help');\r\nconst halpContentDiv = document.getElementById('halpContent');\r\nconst imageHalpDiv = document.getElementById('imageHalp');\r\nconst closeHelpDiv = document.getElementById('closeHelp');\r\n\r\nlet helpArr = [];\r\nlet helpIndex = 0;\r\n\r\ncloseHelpDiv.onclick = function() {\r\n    halpDiv.style.opacity = 0;\r\n    setTimeout(() => {\r\n        halpDiv.style.display = 'none';\r\n        imageHalpDiv.innerHTML = '';\r\n    }, 1000);\r\n};\r\n\r\nhalpContentDiv.onclick = function() {\r\n    helpIndex++;\r\n    if (helpIndex === helpArr.length) helpIndex = 0;\r\n    imageHalpDiv.innerHTML = '';\r\n    imageHalpDiv.append(helpArr[helpIndex]);\r\n};\r\n\r\nfunction showHalp() {\r\n    halpContentDiv.style.width = _render__WEBPACK_IMPORTED_MODULE_6__[\"default\"].size - 64 + 'px';\r\n    halpContentDiv.style.height = _render__WEBPACK_IMPORTED_MODULE_6__[\"default\"].size - 64 + 'px';\r\n    halpDiv.style.display = 'flex';\r\n    imageHalpDiv.append(helpArr[helpIndex]);\r\n    setTimeout(() => halpDiv.style.opacity = 1, 0);\r\n}\n\n//# sourceURL=webpack://webpack-template/./dev_js/main.js?");

/***/ }),

/***/ "./dev_js/render.js":
/*!**************************!*\
  !*** ./dev_js/render.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _classes_View__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./classes/View */ \"./dev_js/classes/View.js\");\n/* harmony import */ var _sound__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./sound */ \"./dev_js/sound.js\");\n\r\n\r\n\r\nconst VIEW = new _classes_View__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\r\n\r\nconst divShell = document.getElementById('shell');\r\nshowSell();\r\n// document.fullscreenEnabled -> true / false\r\n// document.fullscreenElement -> null / element\r\n// document.body.requestFullscreen();\r\n\r\nlet isRendering = true;\r\nlet isCanvasVisible = false;\r\n\r\nconst halpDiv = document.getElementById('help');\r\nconst imageHalpDiv = document.getElementById('imageHalp');\r\n\r\ndocument.body.onresize = () => {\r\n    VIEW.resize();\r\n    if (document.fullscreenEnabled\r\n    && !document.fullscreenElement) {\r\n        stopRender();\r\n    }\r\n\r\n    halpDiv.style.opacity = 0;\r\n    halpDiv.style.display = 'none';\r\n    imageHalpDiv.innerHTML = '';\r\n};\r\n\r\ndivShell.onclick = () => {\r\n    startRender()\r\n    if (document.fullscreenEnabled\r\n    && !document.fullscreenElement) {\r\n        document.body.requestFullscreen();\r\n    }\r\n\r\n    if (!isCanvasVisible) {\r\n        isCanvasVisible = true;\r\n        VIEW.canvas.style.opacity = 1;\r\n    }\r\n};\r\n\r\ndocument.body.onblur = stopRender;\r\n\r\nfunction showSell() {\r\n    divShell.style.display = 'flex';\r\n    //divShell.innerHTML = '<div><nobr>CLICK SCREEN</nobr> FOR <nobr>START GAME</nobr></div>';\r\n    divShell.innerHTML = '<div><nobr> КЛИКНИТЕ </nobr>ПО ЭКРАНУ<nobr>ДЛЯ ПРОДОЛЖЕНИЯ</nobr></div>';\r\n    (0,_sound__WEBPACK_IMPORTED_MODULE_1__.playMusic)(false);\r\n}\r\n\r\nfunction hideSell() {\r\n    divShell.style.display = 'none';\r\n    (0,_sound__WEBPACK_IMPORTED_MODULE_1__.playMusic)();\r\n}\r\n\r\nfunction startRender() {\r\n    hideSell()\r\n    isRendering = true;\r\n    previousTime = performance.now();\r\n    renderId = requestAnimationFrame(render);\r\n}\r\n\r\nfunction stopRender() {\r\n    showSell()\r\n    isRendering = false;\r\n    cancelAnimationFrame(renderId);\r\n}\r\n\r\nlet previousTime = performance.now();\r\nlet renderId = requestAnimationFrame(render);\r\nfunction render(time) {\r\n    const deltaTime = time - previousTime;\r\n    previousTime = time;\r\n    VIEW.context.clearRect(0, 0, VIEW.width, VIEW.height);\r\n    VIEW.layers.forEach( layer => layer.update(deltaTime) );\r\n    if (isRendering) renderId = requestAnimationFrame(render);\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (VIEW);\n\n//# sourceURL=webpack://webpack-template/./dev_js/render.js?");

/***/ }),

/***/ "./dev_js/sound.js":
/*!*************************!*\
  !*** ./dev_js/sound.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   playMusic: () => (/* binding */ playMusic),\n/* harmony export */   playSound: () => (/* binding */ playSound),\n/* harmony export */   setSoundState: () => (/* binding */ setSoundState)\n/* harmony export */ });\n/* harmony import */ var _assets__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./assets */ \"./dev_js/assets.js\");\n\r\n\r\nconst soundState = {\r\n    music: true,\r\n    effects: true,\r\n}\r\n\r\nconst music = [\r\n    'bgm_western_0.mp3',\r\n    'bgm_western_1.mp3',\r\n    'bgm_western_2.mp3',\r\n    'bgm_western_3.mp3',\r\n    'bgm_western_4.mp3',\r\n]\r\nmusic.sort(() => Math.random() - 0.5);\r\nlet musicIndex = Math.floor(Math.random() * music.length);\r\n\r\nconst backgroundMusic = new Audio();\r\nbackgroundMusic.addEventListener('ended', playMusic);\r\n\r\nfunction setSoundState(state) {\r\n    const previousMusicState = soundState.music;\r\n    soundState.music = state.music;\r\n    soundState.effects = state.effects;\r\n    if (!previousMusicState && soundState.music) playMusic();\r\n    else playMusic(false);\r\n}\r\n\r\nlet stepSoundIndex = Math.floor(Math.random() * 4);\r\nlet toiletSoundIndex = Math.floor(Math.random() * 4);\r\n\r\nfunction playSound(sound) {\r\n    if (!soundState.effects) return;\r\n\r\n    if (typeof sound === 'string') {\r\n        switch (sound) {\r\n            case 'step' : \r\n                _assets__WEBPACK_IMPORTED_MODULE_0__.SOUNDS['step' + stepSoundIndex].play();\r\n                stepSoundIndex++;\r\n                if (stepSoundIndex > 3) stepSoundIndex = 0;\r\n                break;\r\n            case 'toilet' : \r\n                _assets__WEBPACK_IMPORTED_MODULE_0__.SOUNDS['toilet' + toiletSoundIndex].play();\r\n                toiletSoundIndex++;\r\n                if (toiletSoundIndex > 3) toiletSoundIndex = 0;\r\n                break;\r\n        }\r\n        return;\r\n    }\r\n\r\n    sound.currentTime = 0;\r\n    sound.play();\r\n}\r\n\r\nfunction playMusic(isAvailable = true) {\r\n    if (!isAvailable) {\r\n        backgroundMusic.pause();\r\n        return;\r\n    }\r\n\r\n    backgroundMusic.src = _assets__WEBPACK_IMPORTED_MODULE_0__.MUSIC_PATH + music[musicIndex];\r\n    backgroundMusic.volume = 0.4;\r\n    backgroundMusic.play();\r\n\r\n    musicIndex++;\r\n    if(musicIndex === music.length) musicIndex = 0;\r\n}\n\n//# sourceURL=webpack://webpack-template/./dev_js/sound.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	var __webpack_exports__ = __webpack_require__("./dev_js/main.js");
/******/ 	
/******/ })()
;